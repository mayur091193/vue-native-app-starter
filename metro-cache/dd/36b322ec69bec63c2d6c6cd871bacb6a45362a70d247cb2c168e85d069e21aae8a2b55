{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"./polyfillNextTick","data":{"isAsync":false}},{"name":"lodash/zipObject","data":{"isAsync":false}},{"name":"react-native","data":{"isAsync":false}},{"name":"@unimodules/core","data":{"isAsync":false}},{"name":"@expo/websql/custom","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.openDatabase = openDatabase;\n\n  var _slicedToArray2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/createClass\"));\n\n  _$$_REQUIRE(_dependencyMap[4], \"./polyfillNextTick\");\n\n  var _zipObject = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"lodash/zipObject\"));\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[6], \"react-native\");\n\n  var _core = _$$_REQUIRE(_dependencyMap[7], \"@unimodules/core\");\n\n  var _custom = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[8], \"@expo/websql/custom\"));\n\n  var ExponentSQLite = _core.NativeModulesProxy.ExponentSQLite;\n\n  var SQLiteDatabase = function () {\n    function SQLiteDatabase(name) {\n      (0, _classCallCheck2.default)(this, SQLiteDatabase);\n      this._closed = false;\n      this._name = name;\n    }\n\n    (0, _createClass2.default)(SQLiteDatabase, [{\n      key: \"exec\",\n      value: function exec(queries, readOnly, callback) {\n        if (this._closed) {\n          throw new Error(\"The SQLite database is closed\");\n        }\n\n        ExponentSQLite.exec(this._name, queries.map(_serializeQuery), readOnly).then(function (nativeResultSets) {\n          callback(null, nativeResultSets.map(_deserializeResultSet));\n        }, function (error) {\n          callback(error instanceof Error ? error : new Error(error));\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        this._closed = true;\n        ExponentSQLite.close(this._name);\n      }\n    }]);\n    return SQLiteDatabase;\n  }();\n\n  function _serializeQuery(query) {\n    return [query.sql, _reactNative.Platform.OS === 'android' ? query.args.map(_escapeBlob) : query.args];\n  }\n\n  function _deserializeResultSet(nativeResult) {\n    var _nativeResult = (0, _slicedToArray2.default)(nativeResult, 5),\n        errorMessage = _nativeResult[0],\n        insertId = _nativeResult[1],\n        rowsAffected = _nativeResult[2],\n        columns = _nativeResult[3],\n        rows = _nativeResult[4];\n\n    if (errorMessage !== null) {\n      return {\n        error: new Error(errorMessage)\n      };\n    }\n\n    return {\n      insertId: insertId,\n      rowsAffected: rowsAffected,\n      rows: rows.map(function (row) {\n        return (0, _zipObject.default)(columns, row);\n      })\n    };\n  }\n\n  function _escapeBlob(data) {\n    if (typeof data === 'string') {\n      return data.replace(/\\u0002/g, \"\\x02\\x02\").replace(/\\u0001/g, \"\\x01\\x02\").replace(/\\u0000/g, \"\\x01\\x01\");\n    } else {\n      return data;\n    }\n  }\n\n  var _openExpoSQLiteDatabase = (0, _custom.default)(SQLiteDatabase);\n\n  function addExecMethod(db) {\n    db.exec = function (queries, readOnly, callback) {\n      db._db.exec(queries, readOnly, callback);\n    };\n\n    return db;\n  }\n\n  function openDatabase(name) {\n    var version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '1.0';\n    var description = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : name;\n    var size = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    var callback = arguments.length > 4 ? arguments[4] : undefined;\n\n    if (name === undefined) {\n      throw new TypeError(\"The database name must not be undefined\");\n    }\n\n    var db = _openExpoSQLiteDatabase(name, version, description, size, callback);\n\n    var dbWithExec = addExecMethod(db);\n    return dbWithExec;\n  }\n});","map":[[15,0,1,0],[17,0,2,0],[19,0,3,0],[21,0,4,0],[23,0,5,0],[25,6,6,8,"ExponentSQLite"],[25,20],[25,23,6,27,"NativeModulesProxy"],[25,47],[25,48,6,8,"ExponentSQLite"],[25,62],[27,6,7,6,"SQLiteDatabase"],[27,20],[28,0,8,4],[28,28,8,16,"name"],[28,32,8,4],[28,34,8,22],[29,0,8,22],[30,0,9,8],[30,11,9,13,"_closed"],[30,18,9,8],[30,21,9,23],[30,26,9,8],[31,0,10,8],[31,11,10,13,"_name"],[31,16,10,8],[31,19,10,21,"name"],[31,23,10,8],[32,0,11,5],[36,27,12,9,"queries"],[36,34],[36,36,12,18,"readOnly"],[36,44],[36,46,12,28,"callback"],[36,54],[36,56,12,38],[37,0,13,8],[37,12,13,12],[37,17,13,17,"_closed"],[37,24,13,8],[37,26,13,26],[38,0,14,12],[38,16,14,18],[38,20,14,22,"Error"],[38,25,14,18],[38,58,14,12],[39,0,15,9],[41,0,16,8,"ExponentSQLite"],[41,8,16,8,"ExponentSQLite"],[41,22,16,22],[41,23,16,23,"exec"],[41,27,16,8],[41,28,16,28],[41,33,16,33,"_name"],[41,38,16,8],[41,40,16,40,"queries"],[41,47,16,47],[41,48,16,48,"map"],[41,51,16,40],[41,52,16,52,"_serializeQuery"],[41,67,16,40],[41,68,16,8],[41,70,16,70,"readOnly"],[41,78,16,8],[41,80,16,80,"then"],[41,84,16,8],[41,85,16,85],[41,95,16,85,"nativeResultSets"],[41,111,16,101],[41,113,16,105],[42,0,17,12,"callback"],[42,10,17,12,"callback"],[42,18,17,20],[42,19,17,21],[42,23,17,20],[42,25,17,27,"nativeResultSets"],[42,41,17,43],[42,42,17,44,"map"],[42,45,17,27],[42,46,17,48,"_deserializeResultSet"],[42,67,17,27],[42,68,17,20],[42,69,17,12],[43,0,18,9],[43,9,16,8],[43,11,18,11],[43,21,18,11,"error"],[43,26,18,16],[43,28,18,20],[44,0,20,12,"callback"],[44,10,20,12,"callback"],[44,18,20,20],[44,19,20,21,"error"],[44,24,20,26],[44,36,20,38,"Error"],[44,41,20,21],[44,44,20,46,"error"],[44,49,20,21],[44,52,20,54],[44,56,20,58,"Error"],[44,61,20,54],[44,62,20,64,"error"],[44,67,20,54],[44,68,20,20],[44,69,20,12],[45,0,21,9],[45,9,16,8],[46,0,22,5],[49,30,23,12],[50,0,24,8],[50,13,24,13,"_closed"],[50,20,24,8],[50,23,24,23],[50,27,24,8],[51,0,25,8,"ExponentSQLite"],[51,8,25,8,"ExponentSQLite"],[51,22,25,22],[51,23,25,23,"close"],[51,28,25,8],[51,29,25,29],[51,34,25,34,"_name"],[51,39,25,8],[52,0,26,5],[57,0,28,0],[57,11,28,9,"_serializeQuery"],[57,26,28,0],[57,27,28,25,"query"],[57,32,28,0],[57,34,28,32],[58,0,29,4],[58,11,29,11],[58,12,29,12,"query"],[58,17,29,17],[58,18,29,18,"sql"],[58,21,29,11],[58,23,29,23,"Platform"],[58,45,29,32,"OS"],[58,47,29,23],[58,52,29,39],[58,61,29,23],[58,64,29,51,"query"],[58,69,29,56],[58,70,29,57,"args"],[58,74,29,51],[58,75,29,62,"map"],[58,78,29,51],[58,79,29,66,"_escapeBlob"],[58,90,29,51],[58,91,29,23],[58,94,29,81,"query"],[58,99,29,86],[58,100,29,87,"args"],[58,104,29,11],[58,105,29,4],[59,0,30,1],[61,0,31,0],[61,11,31,9,"_deserializeResultSet"],[61,32,31,0],[61,33,31,31,"nativeResult"],[61,45,31,0],[61,47,31,45],[62,0,31,45],[62,53,32,64,"nativeResult"],[62,65,31,45],[63,0,31,45],[63,8,32,9,"errorMessage"],[63,20,31,45],[64,0,31,45],[64,8,32,23,"insertId"],[64,16,31,45],[65,0,31,45],[65,8,32,33,"rowsAffected"],[65,20,31,45],[66,0,31,45],[66,8,32,47,"columns"],[66,15,31,45],[67,0,31,45],[67,8,32,56,"rows"],[67,12,31,45],[69,0,35,4],[69,8,35,8,"errorMessage"],[69,20,35,20],[69,25,35,25],[69,29,35,4],[69,31,35,31],[70,0,36,8],[70,13,36,15],[71,0,36,17,"error"],[71,8,36,17,"error"],[71,13,36,22],[71,15,36,24],[71,19,36,28,"Error"],[71,24,36,24],[71,25,36,34,"errorMessage"],[71,37,36,24],[72,0,36,15],[72,7,36,8],[73,0,37,5],[75,0,38,4],[75,11,38,11],[76,0,39,8,"insertId"],[76,6,39,8,"insertId"],[76,14,39,16],[76,16,39,8,"insertId"],[76,24,38,11],[77,0,40,8,"rowsAffected"],[77,6,40,8,"rowsAffected"],[77,18,40,20],[77,20,40,8,"rowsAffected"],[77,32,38,11],[78,0,41,8,"rows"],[78,6,41,8,"rows"],[78,10,41,12],[78,12,41,14,"rows"],[78,16,41,18],[78,17,41,19,"map"],[78,20,41,14],[78,21,41,23],[78,31,41,23,"row"],[78,34,41,26],[79,0,41,26],[79,15,41,30],[79,39,41,40,"columns"],[79,46,41,30],[79,48,41,49,"row"],[79,51,41,30],[79,52,41,26],[80,0,41,26],[80,7,41,14],[81,0,38,11],[81,5,38,4],[82,0,43,1],[84,0,44,0],[84,11,44,9,"_escapeBlob"],[84,22,44,0],[84,23,44,21,"data"],[84,27,44,0],[84,29,44,27],[85,0,45,4],[85,8,45,8],[85,15,45,15,"data"],[85,19,45,8],[85,24,45,24],[85,32,45,4],[85,34,45,34],[86,0,47,8],[86,13,47,15,"data"],[86,17,47,19],[86,18,48,13,"replace"],[86,25,47,15],[86,26,48,21],[86,35,47,15],[86,37,48,32],[86,47,47,15],[86,49,49,13,"replace"],[86,56,47,15],[86,57,49,21],[86,66,47,15],[86,68,49,32],[86,78,47,15],[86,80,50,13,"replace"],[86,87,47,15],[86,88,50,21],[86,97,47,15],[86,99,50,32],[86,109,47,15],[86,110,47,8],[87,0,52,5],[87,5,45,4],[87,11,53,9],[88,0,54,8],[88,13,54,15,"data"],[88,17,54,8],[89,0,55,5],[90,0,56,1],[92,0,57,0],[92,6,57,6,"_openExpoSQLiteDatabase"],[92,29,57,29],[92,32,57,32],[92,53,57,51,"SQLiteDatabase"],[92,67,57,32],[92,68,57,0],[94,0,58,0],[94,11,58,9,"addExecMethod"],[94,24,58,0],[94,25,58,23,"db"],[94,27,58,0],[94,29,58,27],[95,0,59,4,"db"],[95,4,59,4,"db"],[95,6,59,6],[95,7,59,7,"exec"],[95,11,59,4],[95,14,59,14],[95,24,59,15,"queries"],[95,31,59,14],[95,33,59,24,"readOnly"],[95,41,59,14],[95,43,59,34,"callback"],[95,51,59,14],[95,53,59,47],[96,0,60,8,"db"],[96,6,60,8,"db"],[96,8,60,10],[96,9,60,11,"_db"],[96,12,60,8],[96,13,60,15,"exec"],[96,17,60,8],[96,18,60,20,"queries"],[96,25,60,8],[96,27,60,29,"readOnly"],[96,35,60,8],[96,37,60,39,"callback"],[96,45,60,8],[97,0,61,5],[97,5,59,4],[99,0,62,4],[99,11,62,11,"db"],[99,13,62,4],[100,0,63,1],[102,0,64,7],[102,11,64,16,"openDatabase"],[102,23,64,7],[102,24,64,29,"name"],[102,28,64,7],[102,30,64,92],[103,0,64,92],[103,8,64,35,"version"],[103,15,64,92],[103,86,64,45],[103,91,64,92],[104,0,64,92],[104,8,64,52,"description"],[104,19,64,92],[104,90,64,66,"name"],[104,94,64,92],[105,0,64,92],[105,8,64,72,"size"],[105,12,64,92],[105,83,64,79],[105,84,64,92],[106,0,64,92],[106,8,64,82,"callback"],[106,16,64,92],[108,0,65,4],[108,8,65,8,"name"],[108,12,65,12],[108,17,65,17,"undefined"],[108,26,65,4],[108,28,65,28],[109,0,66,8],[109,12,66,14],[109,16,66,18,"TypeError"],[109,25,66,14],[109,68,66,8],[110,0,67,5],[112,0,68,4],[112,8,68,10,"db"],[112,10,68,12],[112,13,68,15,"_openExpoSQLiteDatabase"],[112,36,68,38],[112,37,68,39,"name"],[112,41,68,38],[112,43,68,45,"version"],[112,50,68,38],[112,52,68,54,"description"],[112,63,68,38],[112,65,68,67,"size"],[112,69,68,38],[112,71,68,73,"callback"],[112,79,68,38],[112,80,68,4],[114,0,69,4],[114,8,69,10,"dbWithExec"],[114,18,69,20],[114,21,69,23,"addExecMethod"],[114,34,69,36],[114,35,69,37,"db"],[114,37,69,36],[114,38,69,4],[115,0,70,4],[115,11,70,11,"dbWithExec"],[115,21,70,4],[116,0,71,1]]},"type":"js/module"}]}