{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/assertThisInitialized","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/inherits","data":{"isAsync":false}},{"name":"./WebSocketHMRClient","data":{"isAsync":false}},{"name":"./injectUpdate","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var _possibleConstructorReturn = _$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/possibleConstructorReturn\");\n\n  var _getPrototypeOf = _$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/getPrototypeOf\");\n\n  var _assertThisInitialized = _$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/assertThisInitialized\");\n\n  var _inherits = _$$_REQUIRE(_dependencyMap[5], \"@babel/runtime/helpers/inherits\");\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var WebSocketHMRClient = _$$_REQUIRE(_dependencyMap[6], \"./WebSocketHMRClient\");\n\n  var injectUpdate = _$$_REQUIRE(_dependencyMap[7], \"./injectUpdate\");\n\n  var HMRClient = function (_WebSocketHMRClient) {\n    _inherits(HMRClient, _WebSocketHMRClient);\n\n    function HMRClient(url) {\n      var _this;\n\n      _classCallCheck(this, HMRClient);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(HMRClient).call(this, url));\n\n      _defineProperty(_assertThisInitialized(_this), \"_isEnabled\", false);\n\n      _defineProperty(_assertThisInitialized(_this), \"_pendingUpdate\", null);\n\n      _this.on(\"update\", function (update) {\n        if (_this._isEnabled) {\n          injectUpdate(update);\n        } else if (_this._pendingUpdate == null) {\n          _this._pendingUpdate = update;\n        } else {\n          _this._pendingUpdate = mergeUpdates(_this._pendingUpdate, update);\n        }\n      });\n\n      return _this;\n    }\n\n    _createClass(HMRClient, [{\n      key: \"enable\",\n      value: function enable() {\n        this._isEnabled = true;\n        var update = this._pendingUpdate;\n        this._pendingUpdate = null;\n\n        if (update != null) {\n          injectUpdate(update);\n        }\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        this._isEnabled = false;\n      }\n    }, {\n      key: \"isEnabled\",\n      value: function isEnabled() {\n        return this._isEnabled;\n      }\n    }, {\n      key: \"hasPendingUpdates\",\n      value: function hasPendingUpdates() {\n        return this._pendingUpdate != null;\n      }\n    }]);\n\n    return HMRClient;\n  }(WebSocketHMRClient);\n\n  function mergeUpdates(base, next) {\n    var addedIDs = new Set();\n    var deletedIDs = new Set();\n    var moduleMap = new Map();\n    applyUpdateLocally(base);\n    applyUpdateLocally(next);\n\n    function applyUpdateLocally(update) {\n      update.deleted.forEach(function (id) {\n        if (addedIDs.has(id)) {\n          addedIDs.delete(id);\n        } else {\n          deletedIDs.add(id);\n        }\n\n        moduleMap.delete(id);\n      });\n      update.added.forEach(function (item) {\n        var id = item.module[0];\n\n        if (deletedIDs.has(id)) {\n          deletedIDs.delete(id);\n        } else {\n          addedIDs.add(id);\n        }\n\n        moduleMap.set(id, item);\n      });\n      update.modified.forEach(function (item) {\n        var id = item.module[0];\n        moduleMap.set(id, item);\n      });\n    }\n\n    var result = {\n      isInitialUpdate: next.isInitialUpdate,\n      revisionId: next.revisionId,\n      added: [],\n      modified: [],\n      deleted: []\n    };\n    deletedIDs.forEach(function (id) {\n      result.deleted.push(id);\n    });\n    moduleMap.forEach(function (item, id) {\n      if (deletedIDs.has(id)) {\n        return;\n      }\n\n      if (addedIDs.has(id)) {\n        result.added.push(item);\n      } else {\n        result.modified.push(item);\n      }\n    });\n    return result;\n  }\n\n  module.exports = HMRClient;\n});","map":[[2,0,10,0],[16,0,12,0],[16,11,12,9,"_defineProperty"],[16,26,12,0],[16,27,12,25,"obj"],[16,30,12,0],[16,32,12,30,"key"],[16,35,12,0],[16,37,12,35,"value"],[16,42,12,0],[16,44,12,42],[17,0,13,2],[17,8,13,6,"key"],[17,11,13,9],[17,15,13,13,"obj"],[17,18,13,2],[17,20,13,18],[18,0,14,4,"Object"],[18,6,14,4,"Object"],[18,12,14,10],[18,13,14,11,"defineProperty"],[18,27,14,4],[18,28,14,26,"obj"],[18,31,14,4],[18,33,14,31,"key"],[18,36,14,4],[18,38,14,36],[19,0,15,6,"value"],[19,8,15,6,"value"],[19,13,15,11],[19,15,15,13,"value"],[19,20,14,36],[20,0,16,6,"enumerable"],[20,8,16,6,"enumerable"],[20,18,16,16],[20,20,16,18],[20,24,14,36],[21,0,17,6,"configurable"],[21,8,17,6,"configurable"],[21,20,17,18],[21,22,17,20],[21,26,14,36],[22,0,18,6,"writable"],[22,8,18,6,"writable"],[22,16,18,14],[22,18,18,16],[23,0,14,36],[23,7,14,4],[24,0,20,3],[24,5,13,2],[24,11,20,9],[25,0,21,4,"obj"],[25,6,21,4,"obj"],[25,9,21,7],[25,10,21,8,"key"],[25,13,21,7],[25,14,21,4],[25,17,21,15,"value"],[25,22,21,4],[26,0,22,3],[28,0,23,2],[28,11,23,9,"obj"],[28,14,23,2],[29,0,24,1],[31,0,26,0],[31,6,26,6,"WebSocketHMRClient"],[31,24,26,24],[31,27,26,27,"require"],[31,38,26,34],[31,81,26,0],[33,0,28,0],[33,6,28,6,"injectUpdate"],[33,18,28,18],[33,21,28,21,"require"],[33,32,28,28],[33,69,28,0],[35,6,30,6,"HMRClient"],[35,15],[38,0,31,2],[38,23,31,14,"url"],[38,26,31,2],[38,28,31,19],[39,0,31,19],[41,0,31,19],[43,0,32,4],[43,85,32,10,"url"],[43,88,32,4],[45,0,34,4,"_defineProperty"],[45,6,34,4,"_defineProperty"],[45,21,34,19],[45,53,34,26],[45,65,34,19],[45,67,34,40],[45,72,34,19],[45,73,34,4],[47,0,36,4,"_defineProperty"],[47,6,36,4,"_defineProperty"],[47,21,36,19],[47,53,36,26],[47,69,36,19],[47,71,36,44],[47,75,36,19],[47,76,36,4],[49,0,38,4],[49,12,38,9,"on"],[49,14,38,4],[49,15,38,12],[49,23,38,4],[49,25,38,22],[49,35,38,22,"update"],[49,41,38,28],[49,43,38,32],[50,0,39,6],[50,12,39,10],[50,18,39,15,"_isEnabled"],[50,28,39,6],[50,30,39,27],[51,0,40,8,"injectUpdate"],[51,10,40,8,"injectUpdate"],[51,22,40,20],[51,23,40,21,"update"],[51,29,40,20],[51,30,40,8],[52,0,41,7],[52,9,39,6],[52,15,41,13],[52,19,41,17],[52,25,41,22,"_pendingUpdate"],[52,39,41,17],[52,43,41,40],[52,47,41,13],[52,49,41,46],[53,0,42,8],[53,16,42,13,"_pendingUpdate"],[53,30,42,8],[53,33,42,30,"update"],[53,39,42,8],[54,0,43,7],[54,9,41,13],[54,15,43,13],[55,0,44,8],[55,16,44,13,"_pendingUpdate"],[55,30,44,8],[55,33,44,30,"mergeUpdates"],[55,45,44,42],[55,46,44,43],[55,52,44,48,"_pendingUpdate"],[55,66,44,42],[55,68,44,64,"update"],[55,74,44,42],[55,75,44,8],[56,0,45,7],[57,0,46,5],[57,7,38,4],[59,0,31,19],[60,0,47,3],[64,31,49,11],[65,0,50,4],[65,13,50,9,"_isEnabled"],[65,23,50,4],[65,26,50,22],[65,30,50,4],[66,0,51,4],[66,12,51,10,"update"],[66,18,51,16],[66,21,51,19],[66,26,51,24,"_pendingUpdate"],[66,40,51,4],[67,0,52,4],[67,13,52,9,"_pendingUpdate"],[67,27,52,4],[67,30,52,26],[67,34,52,4],[69,0,54,4],[69,12,54,8,"update"],[69,18,54,14],[69,22,54,18],[69,26,54,4],[69,28,54,24],[70,0,55,6,"injectUpdate"],[70,10,55,6,"injectUpdate"],[70,22,55,18],[70,23,55,19,"update"],[70,29,55,18],[70,30,55,6],[71,0,56,5],[72,0,57,3],[75,32,59,12],[76,0,60,4],[76,13,60,9,"_isEnabled"],[76,23,60,4],[76,26,60,22],[76,31,60,4],[77,0,61,3],[80,34,63,14],[81,0,64,4],[81,15,64,11],[81,20,64,16,"_isEnabled"],[81,30,64,4],[82,0,65,3],[85,42,67,22],[86,0,68,4],[86,15,68,11],[86,20,68,16,"_pendingUpdate"],[86,34,68,11],[86,38,68,34],[86,42,68,4],[87,0,69,3],[91,4,30,24,"WebSocketHMRClient"],[91,22],[93,0,72,0],[93,11,72,9,"mergeUpdates"],[93,23,72,0],[93,24,72,22,"base"],[93,28,72,0],[93,30,72,28,"next"],[93,34,72,0],[93,36,72,34],[94,0,73,2],[94,8,73,8,"addedIDs"],[94,16,73,16],[94,19,73,19],[94,23,73,23,"Set"],[94,26,73,19],[94,28,73,2],[95,0,74,2],[95,8,74,8,"deletedIDs"],[95,18,74,18],[95,21,74,21],[95,25,74,25,"Set"],[95,28,74,21],[95,30,74,2],[96,0,75,2],[96,8,75,8,"moduleMap"],[96,17,75,17],[96,20,75,20],[96,24,75,24,"Map"],[96,27,75,20],[96,29,75,2],[97,0,77,2,"applyUpdateLocally"],[97,4,77,2,"applyUpdateLocally"],[97,22,77,20],[97,23,77,21,"base"],[97,27,77,20],[97,28,77,2],[98,0,78,2,"applyUpdateLocally"],[98,4,78,2,"applyUpdateLocally"],[98,22,78,20],[98,23,78,21,"next"],[98,27,78,20],[98,28,78,2],[100,0,80,2],[100,13,80,11,"applyUpdateLocally"],[100,31,80,2],[100,32,80,30,"update"],[100,38,80,2],[100,40,80,38],[101,0,81,4,"update"],[101,6,81,4,"update"],[101,12,81,10],[101,13,81,11,"deleted"],[101,20,81,4],[101,21,81,19,"forEach"],[101,28,81,4],[101,29,81,27],[101,39,81,27,"id"],[101,41,81,29],[101,43,81,33],[102,0,82,6],[102,12,82,10,"addedIDs"],[102,20,82,18],[102,21,82,19,"has"],[102,24,82,10],[102,25,82,23,"id"],[102,27,82,10],[102,28,82,6],[102,30,82,28],[103,0,83,8,"addedIDs"],[103,10,83,8,"addedIDs"],[103,18,83,16],[103,19,83,17,"delete"],[103,25,83,8],[103,26,83,24,"id"],[103,28,83,8],[104,0,84,7],[104,9,82,6],[104,15,84,13],[105,0,85,8,"deletedIDs"],[105,10,85,8,"deletedIDs"],[105,20,85,18],[105,21,85,19,"add"],[105,24,85,8],[105,25,85,23,"id"],[105,27,85,8],[106,0,86,7],[108,0,88,6,"moduleMap"],[108,8,88,6,"moduleMap"],[108,17,88,15],[108,18,88,16,"delete"],[108,24,88,6],[108,25,88,23,"id"],[108,27,88,6],[109,0,89,5],[109,7,81,4],[110,0,90,4,"update"],[110,6,90,4,"update"],[110,12,90,10],[110,13,90,11,"added"],[110,18,90,4],[110,19,90,17,"forEach"],[110,26,90,4],[110,27,90,25],[110,37,90,25,"item"],[110,41,90,29],[110,43,90,33],[111,0,91,6],[111,12,91,12,"id"],[111,14,91,14],[111,17,91,17,"item"],[111,21,91,21],[111,22,91,22,"module"],[111,28,91,17],[111,29,91,29],[111,30,91,17],[111,31,91,6],[113,0,93,6],[113,12,93,10,"deletedIDs"],[113,22,93,20],[113,23,93,21,"has"],[113,26,93,10],[113,27,93,25,"id"],[113,29,93,10],[113,30,93,6],[113,32,93,30],[114,0,94,8,"deletedIDs"],[114,10,94,8,"deletedIDs"],[114,20,94,18],[114,21,94,19,"delete"],[114,27,94,8],[114,28,94,26,"id"],[114,30,94,8],[115,0,95,7],[115,9,93,6],[115,15,95,13],[116,0,96,8,"addedIDs"],[116,10,96,8,"addedIDs"],[116,18,96,16],[116,19,96,17,"add"],[116,22,96,8],[116,23,96,21,"id"],[116,25,96,8],[117,0,97,7],[119,0,99,6,"moduleMap"],[119,8,99,6,"moduleMap"],[119,17,99,15],[119,18,99,16,"set"],[119,21,99,6],[119,22,99,20,"id"],[119,24,99,6],[119,26,99,24,"item"],[119,30,99,6],[120,0,100,5],[120,7,90,4],[121,0,101,4,"update"],[121,6,101,4,"update"],[121,12,101,10],[121,13,101,11,"modified"],[121,21,101,4],[121,22,101,20,"forEach"],[121,29,101,4],[121,30,101,28],[121,40,101,28,"item"],[121,44,101,32],[121,46,101,36],[122,0,102,6],[122,12,102,12,"id"],[122,14,102,14],[122,17,102,17,"item"],[122,21,102,21],[122,22,102,22,"module"],[122,28,102,17],[122,29,102,29],[122,30,102,17],[122,31,102,6],[123,0,103,6,"moduleMap"],[123,8,103,6,"moduleMap"],[123,17,103,15],[123,18,103,16,"set"],[123,21,103,6],[123,22,103,20,"id"],[123,24,103,6],[123,26,103,24,"item"],[123,30,103,6],[124,0,104,5],[124,7,101,4],[125,0,105,3],[127,0,108,2],[127,8,108,8,"result"],[127,14,108,14],[127,17,108,17],[128,0,109,4,"isInitialUpdate"],[128,6,109,4,"isInitialUpdate"],[128,21,109,19],[128,23,109,21,"next"],[128,27,109,25],[128,28,109,26,"isInitialUpdate"],[128,43,108,17],[129,0,110,4,"revisionId"],[129,6,110,4,"revisionId"],[129,16,110,14],[129,18,110,16,"next"],[129,22,110,20],[129,23,110,21,"revisionId"],[129,33,108,17],[130,0,111,4,"added"],[130,6,111,4,"added"],[130,11,111,9],[130,13,111,11],[130,15,108,17],[131,0,112,4,"modified"],[131,6,112,4,"modified"],[131,14,112,12],[131,16,112,14],[131,18,108,17],[132,0,113,4,"deleted"],[132,6,113,4,"deleted"],[132,13,113,11],[132,15,113,13],[133,0,108,17],[133,5,108,2],[134,0,115,2,"deletedIDs"],[134,4,115,2,"deletedIDs"],[134,14,115,12],[134,15,115,13,"forEach"],[134,22,115,2],[134,23,115,21],[134,33,115,21,"id"],[134,35,115,23],[134,37,115,27],[135,0,116,4,"result"],[135,6,116,4,"result"],[135,12,116,10],[135,13,116,11,"deleted"],[135,20,116,4],[135,21,116,19,"push"],[135,25,116,4],[135,26,116,24,"id"],[135,28,116,4],[136,0,117,3],[136,5,115,2],[137,0,118,2,"moduleMap"],[137,4,118,2,"moduleMap"],[137,13,118,11],[137,14,118,12,"forEach"],[137,21,118,2],[137,22,118,20],[137,32,118,21,"item"],[137,36,118,20],[137,38,118,27,"id"],[137,40,118,20],[137,42,118,34],[138,0,119,4],[138,10,119,8,"deletedIDs"],[138,20,119,18],[138,21,119,19,"has"],[138,24,119,8],[138,25,119,23,"id"],[138,27,119,8],[138,28,119,4],[138,30,119,28],[139,0,120,6],[140,0,121,5],[142,0,123,4],[142,10,123,8,"addedIDs"],[142,18,123,16],[142,19,123,17,"has"],[142,22,123,8],[142,23,123,21,"id"],[142,25,123,8],[142,26,123,4],[142,28,123,26],[143,0,124,6,"result"],[143,8,124,6,"result"],[143,14,124,12],[143,15,124,13,"added"],[143,20,124,6],[143,21,124,19,"push"],[143,25,124,6],[143,26,124,24,"item"],[143,30,124,6],[144,0,125,5],[144,7,123,4],[144,13,125,11],[145,0,126,6,"result"],[145,8,126,6,"result"],[145,14,126,12],[145,15,126,13,"modified"],[145,23,126,6],[145,24,126,22,"push"],[145,28,126,6],[145,29,126,27,"item"],[145,33,126,6],[146,0,127,5],[147,0,128,3],[147,5,118,2],[148,0,129,2],[148,11,129,9,"result"],[148,17,129,2],[149,0,130,1],[151,0,132,0,"module"],[151,2,132,0,"module"],[151,8,132,6],[151,9,132,7,"exports"],[151,16,132,0],[151,19,132,17,"HMRClient"],[151,28,132,0]]},"type":"js/module"}]}