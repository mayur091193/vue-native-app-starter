{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireWildcard","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"blueimp-md5","data":{"isAsync":false}},{"name":"expo-constants","data":{"isAsync":false}},{"name":"expo-file-system","data":{"isAsync":false}},{"name":"./AssetUris","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireWildcard = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireWildcard\");\n\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getManifest = getManifest;\n  exports.downloadAsync = downloadAsync;\n  exports.manifestBaseUrl = exports.IS_MANAGED_ENV = void 0;\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/regenerator\"));\n\n  var _blueimpMd = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"blueimp-md5\"));\n\n  var _expoConstants = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"expo-constants\"));\n\n  var FileSystem = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[5], \"expo-file-system\"));\n\n  var _AssetUris = _$$_REQUIRE(_dependencyMap[6], \"./AssetUris\");\n\n  var IS_MANAGED_ENV = !!_expoConstants.default.appOwnership;\n  exports.IS_MANAGED_ENV = IS_MANAGED_ENV;\n\n  function getManifest() {\n    return _expoConstants.default.manifest || {};\n  }\n\n  var manifestBaseUrl = _expoConstants.default.experienceUrl ? (0, _AssetUris.getManifestBaseUrl)(_expoConstants.default.experienceUrl) : null;\n  exports.manifestBaseUrl = manifestBaseUrl;\n\n  function downloadAsync(uri, hash, type, name) {\n    return _regenerator.default.async(function downloadAsync$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!IS_MANAGED_ENV) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", _downloadAsyncManagedEnv(uri, hash, type, name));\n\n          case 2:\n            return _context.abrupt(\"return\", _downloadAsyncUnmanagedEnv(uri, hash, type));\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  }\n\n  function _downloadAsyncManagedEnv(uri, hash, type, name) {\n    var cacheFileId, localUri, _ref, exists, md5, _ref2;\n\n    return _regenerator.default.async(function _downloadAsyncManagedEnv$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            cacheFileId = hash || (0, _blueimpMd.default)(uri);\n            localUri = FileSystem.cacheDirectory + \"ExponentAsset-\" + cacheFileId + \".\" + type;\n            _context2.next = 4;\n            return _regenerator.default.awrap(FileSystem.getInfoAsync(localUri, {\n              md5: true\n            }));\n\n          case 4:\n            _ref = _context2.sent;\n            exists = _ref.exists;\n            md5 = _ref.md5;\n\n            if (!(!exists || hash !== null && md5 !== hash)) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 10;\n            return _regenerator.default.awrap(FileSystem.downloadAsync(uri, localUri, {\n              md5: true\n            }));\n\n          case 10:\n            _ref2 = _context2.sent;\n            md5 = _ref2.md5;\n\n            if (!(hash !== null && md5 !== hash)) {\n              _context2.next = 14;\n              break;\n            }\n\n            throw new Error(\"Downloaded file for asset '\" + name + \".\" + type + \"' \" + (\"Located at \" + uri + \" \") + \"failed MD5 integrity check\");\n\n          case 14:\n            return _context2.abrupt(\"return\", localUri);\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  }\n\n  function _downloadAsyncUnmanagedEnv(uri, hash, type) {\n    var cacheFileId, localUri;\n    return _regenerator.default.async(function _downloadAsyncUnmanagedEnv$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (!uri.startsWith('file://')) {\n              _context3.next = 2;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", uri);\n\n          case 2:\n            cacheFileId = hash || (0, _blueimpMd.default)(uri);\n            localUri = FileSystem.cacheDirectory + \"ExponentAsset-\" + cacheFileId + \".\" + type;\n            _context3.next = 6;\n            return _regenerator.default.awrap(FileSystem.downloadAsync(uri, localUri));\n\n          case 6:\n            return _context3.abrupt(\"return\", localUri);\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  }\n});","map":[[15,0,1,0],[17,0,2,0],[19,0,3,0],[21,0,4,0],[23,0,5,7],[23,6,5,13,"IS_MANAGED_ENV"],[23,20,5,27],[23,23,5,30],[23,24,5,31],[23,25,5,32,"Constants"],[23,48,5,42,"appOwnership"],[23,60,5,7],[26,0,6,7],[26,11,6,16,"getManifest"],[26,22,6,7],[26,25,6,30],[27,0,7,4],[27,11,7,11,"Constants"],[27,34,7,21,"manifest"],[27,42,7,11],[27,46,7,33],[27,48,7,4],[28,0,8,1],[30,0,10,7],[30,6,10,13,"manifestBaseUrl"],[30,21,10,28],[30,24,10,31,"Constants"],[30,47,10,41,"experienceUrl"],[30,60,10,31],[30,63,11,6],[30,98,11,25,"Constants"],[30,121,11,35,"experienceUrl"],[30,134,11,6],[30,135,10,31],[30,138,12,6],[30,142,10,7],[33,0,13,7],[33,11,13,22,"downloadAsync"],[33,24,13,7],[33,25,13,36,"uri"],[33,28,13,7],[33,30,13,41,"hash"],[33,34,13,7],[33,36,13,47,"type"],[33,40,13,7],[33,42,13,53,"name"],[33,46,13,7],[34,0,13,7],[35,0,13,7],[36,0,13,7],[37,0,13,7],[38,0,13,7],[38,17,14,8,"IS_MANAGED_ENV"],[38,31,13,7],[39,0,13,7],[40,0,13,7],[41,0,13,7],[43,0,13,7],[43,45,15,15,"_downloadAsyncManagedEnv"],[43,69,15,39],[43,70,15,40,"uri"],[43,73,15,39],[43,75,15,45,"hash"],[43,79,15,39],[43,81,15,51,"type"],[43,85,15,39],[43,87,15,57,"name"],[43,91,15,39],[43,92,13,7],[45,0,13,7],[46,0,13,7],[46,45,17,11,"_downloadAsyncUnmanagedEnv"],[46,71,17,37],[46,72,17,38,"uri"],[46,75,17,37],[46,77,17,43,"hash"],[46,81,17,37],[46,83,17,49,"type"],[46,87,17,37],[46,88,13,7],[48,0,13,7],[49,0,13,7],[50,0,13,7],[51,0,13,7],[52,0,13,7],[53,0,13,7],[54,0,13,7],[56,0,19,0],[56,11,19,15,"_downloadAsyncManagedEnv"],[56,35,19,0],[56,36,19,40,"uri"],[56,39,19,0],[56,41,19,45,"hash"],[56,45,19,0],[56,47,19,51,"type"],[56,51,19,0],[56,53,19,57,"name"],[56,57,19,0],[57,0,19,0],[59,0,19,0],[60,0,19,0],[61,0,19,0],[62,0,19,0],[63,0,20,10,"cacheFileId"],[63,12,20,10,"cacheFileId"],[63,23,19,0],[63,26,20,24,"hash"],[63,30,20,28],[63,34,20,32],[63,58,20,43,"uri"],[63,61,20,32],[63,62,19,0],[64,0,21,10,"localUri"],[64,12,21,10,"localUri"],[64,20,19,0],[64,23,21,24,"FileSystem"],[64,33,21,34],[64,34,21,35,"cacheDirectory"],[64,48,19,0],[64,70,21,66,"cacheFileId"],[64,81,19,0],[64,90,21,81,"type"],[64,94,19,0],[65,0,19,0],[66,0,19,0],[66,46,22,32,"FileSystem"],[66,56,22,42],[66,57,22,43,"getInfoAsync"],[66,69,22,32],[66,70,22,56,"localUri"],[66,78,22,32],[66,80,22,66],[67,0,23,8,"md5"],[67,14,23,8,"md5"],[67,17,23,11],[67,19,23,13],[68,0,22,66],[68,13,22,32],[68,14,19,0],[70,0,19,0],[71,0,19,0],[72,0,22,10,"exists"],[72,12,22,10,"exists"],[72,18,19,0],[72,26,22,10,"exists"],[72,32,19,0],[73,0,22,18,"md5"],[73,12,22,18,"md5"],[73,15,19,0],[73,23,22,18,"md5"],[73,26,19,0],[75,0,19,0],[75,18,25,8],[75,19,25,9,"exists"],[75,25,25,8],[75,29,25,20,"hash"],[75,33,25,24],[75,38,25,29],[75,42,25,20],[75,46,25,37,"md5"],[75,49,25,40],[75,54,25,45,"hash"],[75,58,19,0],[76,0,19,0],[77,0,19,0],[78,0,19,0],[80,0,19,0],[81,0,19,0],[81,46,26,25,"FileSystem"],[81,56,26,35],[81,57,26,36,"downloadAsync"],[81,70,26,25],[81,71,26,50,"uri"],[81,74,26,25],[81,76,26,55,"localUri"],[81,84,26,25],[81,86,26,65],[82,0,27,12,"md5"],[82,14,27,12,"md5"],[82,17,27,15],[82,19,27,17],[83,0,26,65],[83,13,26,25],[83,14,19,0],[85,0,19,0],[86,0,19,0],[87,0,26,11,"md5"],[87,12,26,11,"md5"],[87,15,19,0],[87,24,26,11,"md5"],[87,27,19,0],[89,0,19,0],[89,18,29,12,"hash"],[89,22,29,16],[89,27,29,21],[89,31,29,12],[89,35,29,29,"md5"],[89,38,29,32],[89,43,29,37,"hash"],[89,47,19,0],[90,0,19,0],[91,0,19,0],[92,0,19,0],[94,0,19,0],[94,18,30,18],[94,22,30,22,"Error"],[94,27,30,18],[94,28,30,28],[94,60,30,58,"name"],[94,64,30,28],[94,73,30,66,"type"],[94,77,30,28],[94,104,31,30,"uri"],[94,107,30,28],[94,145,30,18],[94,146,19,0],[96,0,19,0],[97,0,19,0],[97,46,35,11,"localUri"],[97,54,19,0],[99,0,19,0],[100,0,19,0],[101,0,19,0],[102,0,19,0],[103,0,19,0],[104,0,19,0],[105,0,19,0],[107,0,37,0],[107,11,37,15,"_downloadAsyncUnmanagedEnv"],[107,37,37,0],[107,38,37,42,"uri"],[107,41,37,0],[107,43,37,47,"hash"],[107,47,37,0],[107,49,37,53,"type"],[107,53,37,0],[108,0,37,0],[109,0,37,0],[110,0,37,0],[111,0,37,0],[112,0,37,0],[113,0,37,0],[113,17,39,8,"uri"],[113,20,39,11],[113,21,39,12,"startsWith"],[113,31,39,8],[113,32,39,23],[113,41,39,8],[113,42,37,0],[114,0,37,0],[115,0,37,0],[116,0,37,0],[118,0,37,0],[118,46,40,15,"uri"],[118,49,37,0],[120,0,37,0],[121,0,42,10,"cacheFileId"],[121,12,42,10,"cacheFileId"],[121,23,37,0],[121,26,42,24,"hash"],[121,30,42,28],[121,34,42,32],[121,58,42,43,"uri"],[121,61,42,32],[121,62,37,0],[122,0,43,10,"localUri"],[122,12,43,10,"localUri"],[122,20,37,0],[122,23,43,24,"FileSystem"],[122,33,43,34],[122,34,43,35,"cacheDirectory"],[122,48,37,0],[122,70,43,66,"cacheFileId"],[122,81,37,0],[122,90,43,81,"type"],[122,94,37,0],[123,0,37,0],[124,0,37,0],[124,46,46,10,"FileSystem"],[124,56,46,20],[124,57,46,21,"downloadAsync"],[124,70,46,10],[124,71,46,35,"uri"],[124,74,46,10],[124,76,46,40,"localUri"],[124,84,46,10],[124,85,37,0],[126,0,37,0],[127,0,37,0],[127,46,47,11,"localUri"],[127,54,37,0],[129,0,37,0],[130,0,37,0],[131,0,37,0],[132,0,37,0],[133,0,37,0],[134,0,37,0],[135,0,37,0]]},"type":"js/module"}]}