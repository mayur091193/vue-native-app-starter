{"dependencies":[{"name":"./Permissions.types","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.coalesceStatuses = coalesceStatuses;\n  exports.coalesceExpirations = coalesceExpirations;\n\n  var _Permissions = _$$_REQUIRE(_dependencyMap[0], \"./Permissions.types\");\n\n  function coalesceStatuses(permissions) {\n    var statuses = Object.keys(permissions).map(function (type) {\n      return permissions[type].status;\n    });\n    statuses.sort(function (status1, status2) {\n      return _getStatusWeight(status1) - _getStatusWeight(status2);\n    });\n    return statuses[statuses.length - 1];\n  }\n\n  function _getStatusWeight(status) {\n    switch (status) {\n      case _Permissions.PermissionStatus.GRANTED:\n        return 0;\n\n      case _Permissions.PermissionStatus.DENIED:\n        return 1;\n\n      case _Permissions.PermissionStatus.UNDETERMINED:\n        return 2;\n\n      default:\n        return 100;\n    }\n  }\n\n  function coalesceExpirations(permissions) {\n    var maxExpiration = 9007199254740991;\n    var expirations = Object.keys(permissions).map(function (type) {\n      return permissions[type].expires;\n    });\n    expirations.sort(function (e1, e2) {\n      return (e1 == null || e1 === 'never' ? maxExpiration : e1) - (e2 == null || e2 === 'never' ? maxExpiration : e2);\n    });\n    return expirations[0];\n  }\n});","map":[[8,0,1,0],[10,0,2,7],[10,11,2,16,"coalesceStatuses"],[10,27,2,7],[10,28,2,33,"permissions"],[10,39,2,7],[10,41,2,46],[11,0,3,4],[11,8,3,10,"statuses"],[11,16,3,18],[11,19,3,21,"Object"],[11,25,3,27],[11,26,3,28,"keys"],[11,30,3,21],[11,31,3,33,"permissions"],[11,42,3,21],[11,44,3,46,"map"],[11,47,3,21],[11,48,3,50],[11,58,3,50,"type"],[11,62,3,54],[12,0,3,54],[12,13,3,58,"permissions"],[12,24,3,69],[12,25,3,70,"type"],[12,29,3,69],[12,30,3,58],[12,31,3,76,"status"],[12,37,3,54],[13,0,3,54],[13,5,3,21],[13,6,3,4],[14,0,4,4,"statuses"],[14,4,4,4,"statuses"],[14,12,4,12],[14,13,4,13,"sort"],[14,17,4,4],[14,18,4,18],[14,28,4,19,"status1"],[14,35,4,18],[14,37,4,28,"status2"],[14,44,4,18],[15,0,4,18],[15,13,4,40,"_getStatusWeight"],[15,29,4,56],[15,30,4,57,"status1"],[15,37,4,56],[15,38,4,40],[15,41,4,68,"_getStatusWeight"],[15,57,4,84],[15,58,4,85,"status2"],[15,65,4,84],[15,66,4,18],[16,0,4,18],[16,5,4,4],[17,0,6,4],[17,11,6,11,"statuses"],[17,19,6,19],[17,20,6,20,"statuses"],[17,28,6,28],[17,29,6,29,"length"],[17,35,6,20],[17,38,6,38],[17,39,6,19],[17,40,6,4],[18,0,7,1],[20,0,8,0],[20,11,8,9,"_getStatusWeight"],[20,27,8,0],[20,28,8,26,"status"],[20,34,8,0],[20,36,8,34],[21,0,12,4],[21,12,12,12,"status"],[21,18,12,4],[22,0,13,8],[22,11,13,13,"PermissionStatus"],[22,41,13,30,"GRANTED"],[22,48,13,8],[23,0,14,12],[23,15,14,19],[23,16,14,12],[25,0,15,8],[25,11,15,13,"PermissionStatus"],[25,41,15,30,"DENIED"],[25,47,15,8],[26,0,16,12],[26,15,16,19],[26,16,16,12],[28,0,17,8],[28,11,17,13,"PermissionStatus"],[28,41,17,30,"UNDETERMINED"],[28,53,17,8],[29,0,18,12],[29,15,18,19],[29,16,18,12],[31,0,19,8],[32,0,20,12],[32,15,20,19],[32,18,20,12],[33,0,12,4],[34,0,22,1],[36,0,23,7],[36,11,23,16,"coalesceExpirations"],[36,30,23,7],[36,31,23,36,"permissions"],[36,42,23,7],[36,44,23,49],[37,0,24,4],[37,8,24,10,"maxExpiration"],[37,21,24,23],[37,24,24,26],[37,40,24,4],[38,0,25,4],[38,8,25,10,"expirations"],[38,19,25,21],[38,22,25,24,"Object"],[38,28,25,30],[38,29,25,31,"keys"],[38,33,25,24],[38,34,25,36,"permissions"],[38,45,25,24],[38,47,25,49,"map"],[38,50,25,24],[38,51,25,53],[38,61,25,53,"type"],[38,65,25,57],[39,0,25,57],[39,13,25,61,"permissions"],[39,24,25,72],[39,25,25,73,"type"],[39,29,25,72],[39,30,25,61],[39,31,25,79,"expires"],[39,38,25,57],[40,0,25,57],[40,5,25,24],[40,6,25,4],[41,0,26,4,"expirations"],[41,4,26,4,"expirations"],[41,15,26,15],[41,16,26,16,"sort"],[41,20,26,4],[41,21,26,21],[41,31,26,22,"e1"],[41,33,26,21],[41,35,26,26,"e2"],[41,37,26,21],[42,0,26,21],[42,13,26,33],[42,14,26,34,"e1"],[42,16,26,36],[42,20,26,40],[42,24,26,34],[42,28,26,48,"e1"],[42,30,26,50],[42,35,26,55],[42,42,26,34],[42,45,26,65,"maxExpiration"],[42,58,26,34],[42,61,26,81,"e1"],[42,63,26,33],[42,68,27,9,"e2"],[42,70,27,11],[42,74,27,15],[42,78,27,9],[42,82,27,23,"e2"],[42,84,27,25],[42,89,27,30],[42,96,27,9],[42,99,27,40,"maxExpiration"],[42,112,27,9],[42,115,27,56,"e2"],[42,117,26,33],[42,118,26,21],[43,0,26,21],[43,5,26,4],[44,0,29,4],[44,11,29,11,"expirations"],[44,22,29,22],[44,23,29,23],[44,24,29,22],[44,25,29,4],[45,0,30,1]]},"type":"js/module"}]}