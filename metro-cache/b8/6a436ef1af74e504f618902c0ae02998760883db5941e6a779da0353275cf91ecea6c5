{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/assertThisInitialized","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/inherits","data":{"isAsync":false}},{"name":"eventemitter3","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var _possibleConstructorReturn = _$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/possibleConstructorReturn\");\n\n  var _getPrototypeOf = _$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/getPrototypeOf\");\n\n  var _assertThisInitialized = _$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/assertThisInitialized\");\n\n  var _inherits = _$$_REQUIRE(_dependencyMap[5], \"@babel/runtime/helpers/inherits\");\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var EventEmitter = _$$_REQUIRE(_dependencyMap[6], \"eventemitter3\");\n\n  var WebSocketHMRClient = function (_EventEmitter) {\n    _inherits(WebSocketHMRClient, _EventEmitter);\n\n    function WebSocketHMRClient(url) {\n      var _this;\n\n      _classCallCheck(this, WebSocketHMRClient);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(WebSocketHMRClient).call(this));\n\n      _defineProperty(_assertThisInitialized(_this), \"_queue\", []);\n\n      _defineProperty(_assertThisInitialized(_this), \"_state\", \"opening\");\n\n      _this._ws = new global.WebSocket(url);\n\n      _this._ws.onopen = function () {\n        _this._state = \"open\";\n\n        _this.emit(\"open\");\n\n        _this._flushQueue();\n      };\n\n      _this._ws.onerror = function (error) {\n        _this.emit(\"connection-error\", error);\n      };\n\n      _this._ws.onclose = function () {\n        _this._state = \"closed\";\n\n        _this.emit(\"close\");\n      };\n\n      _this._ws.onmessage = function (message) {\n        var data = JSON.parse(message.data);\n\n        switch (data.type) {\n          case \"bundle-registered\":\n            _this.emit(\"bundle-registered\");\n\n            break;\n\n          case \"update-start\":\n            _this.emit(\"update-start\", data.body);\n\n            break;\n\n          case \"update\":\n            _this.emit(\"update\", data.body);\n\n            break;\n\n          case \"update-done\":\n            _this.emit(\"update-done\");\n\n            break;\n\n          case \"error\":\n            _this.emit(\"error\", data.body);\n\n            break;\n\n          default:\n            _this.emit(\"error\", {\n              type: \"unknown-message\",\n              message: data\n            });\n\n        }\n      };\n\n      return _this;\n    }\n\n    _createClass(WebSocketHMRClient, [{\n      key: \"close\",\n      value: function close() {\n        this._ws.close();\n      }\n    }, {\n      key: \"send\",\n      value: function send(message) {\n        switch (this._state) {\n          case \"opening\":\n            this._queue.push(message);\n\n            break;\n\n          case \"open\":\n            this._ws.send(message);\n\n            break;\n\n          case \"closed\":\n            break;\n\n          default:\n            throw new Error(\"[WebSocketHMRClient] Unknown state: \" + this._state);\n        }\n      }\n    }, {\n      key: \"_flushQueue\",\n      value: function _flushQueue() {\n        var _this2 = this;\n\n        this._queue.forEach(function (message) {\n          return _this2.send(message);\n        });\n\n        this._queue.length = 0;\n      }\n    }]);\n\n    return WebSocketHMRClient;\n  }(EventEmitter);\n\n  module.exports = WebSocketHMRClient;\n});","map":[[2,0,10,0],[16,0,12,0],[16,11,12,9,"_defineProperty"],[16,26,12,0],[16,27,12,25,"obj"],[16,30,12,0],[16,32,12,30,"key"],[16,35,12,0],[16,37,12,35,"value"],[16,42,12,0],[16,44,12,42],[17,0,13,2],[17,8,13,6,"key"],[17,11,13,9],[17,15,13,13,"obj"],[17,18,13,2],[17,20,13,18],[18,0,14,4,"Object"],[18,6,14,4,"Object"],[18,12,14,10],[18,13,14,11,"defineProperty"],[18,27,14,4],[18,28,14,26,"obj"],[18,31,14,4],[18,33,14,31,"key"],[18,36,14,4],[18,38,14,36],[19,0,15,6,"value"],[19,8,15,6,"value"],[19,13,15,11],[19,15,15,13,"value"],[19,20,14,36],[20,0,16,6,"enumerable"],[20,8,16,6,"enumerable"],[20,18,16,16],[20,20,16,18],[20,24,14,36],[21,0,17,6,"configurable"],[21,8,17,6,"configurable"],[21,20,17,18],[21,22,17,20],[21,26,14,36],[22,0,18,6,"writable"],[22,8,18,6,"writable"],[22,16,18,14],[22,18,18,16],[23,0,14,36],[23,7,14,4],[24,0,20,3],[24,5,13,2],[24,11,20,9],[25,0,21,4,"obj"],[25,6,21,4,"obj"],[25,9,21,7],[25,10,21,8,"key"],[25,13,21,7],[25,14,21,4],[25,17,21,15,"value"],[25,22,21,4],[26,0,22,3],[28,0,23,2],[28,11,23,9,"obj"],[28,14,23,2],[29,0,24,1],[31,0,26,0],[31,6,26,6,"EventEmitter"],[31,18,26,18],[31,21,26,21,"require"],[31,32,26,28],[31,68,26,0],[33,6,32,6,"WebSocketHMRClient"],[33,24],[36,0,33,2],[36,32,33,14,"url"],[36,35,33,2],[36,37,33,19],[37,0,33,19],[39,0,33,19],[41,0,34,4],[43,0,37,4,"_defineProperty"],[43,6,37,4,"_defineProperty"],[43,21,37,19],[43,53,37,26],[43,61,37,19],[43,63,37,36],[43,65,37,19],[43,66,37,4],[45,0,39,4,"_defineProperty"],[45,6,39,4,"_defineProperty"],[45,21,39,19],[45,53,39,26],[45,61,39,19],[45,63,39,36],[45,72,39,19],[45,73,39,4],[47,0,41,4],[47,12,41,9,"_ws"],[47,15,41,4],[47,18,41,15],[47,22,41,19,"global"],[47,28,41,25],[47,29,41,26,"WebSocket"],[47,38,41,15],[47,39,41,36,"url"],[47,42,41,15],[47,43,41,4],[49,0,43,4],[49,12,43,9,"_ws"],[49,15,43,4],[49,16,43,13,"onopen"],[49,22,43,4],[49,25,43,22],[49,37,43,28],[50,0,44,6],[50,14,44,11,"_state"],[50,20,44,6],[50,23,44,20],[50,29,44,6],[52,0,45,6],[52,14,45,11,"emit"],[52,18,45,6],[52,19,45,16],[52,25,45,6],[54,0,47,6],[54,14,47,11,"_flushQueue"],[54,25,47,6],[55,0,48,5],[55,7,43,4],[57,0,50,4],[57,12,50,9,"_ws"],[57,15,50,4],[57,16,50,13,"onerror"],[57,23,50,4],[57,26,50,23],[57,36,50,23,"error"],[57,41,50,28],[57,43,50,32],[58,0,51,6],[58,14,51,11,"emit"],[58,18,51,6],[58,19,51,16],[58,37,51,6],[58,39,51,36,"error"],[58,44,51,6],[59,0,52,5],[59,7,50,4],[61,0,54,4],[61,12,54,9,"_ws"],[61,15,54,4],[61,16,54,13,"onclose"],[61,23,54,4],[61,26,54,23],[61,38,54,29],[62,0,55,6],[62,14,55,11,"_state"],[62,20,55,6],[62,23,55,20],[62,31,55,6],[64,0,56,6],[64,14,56,11,"emit"],[64,18,56,6],[64,19,56,16],[64,26,56,6],[65,0,57,5],[65,7,54,4],[67,0,59,4],[67,12,59,9,"_ws"],[67,15,59,4],[67,16,59,13,"onmessage"],[67,25,59,4],[67,28,59,25],[67,38,59,25,"message"],[67,45,59,32],[67,47,59,36],[68,0,60,6],[68,12,60,12,"data"],[68,16,60,16],[68,19,60,19,"JSON"],[68,23,60,23],[68,24,60,24,"parse"],[68,29,60,19],[68,30,60,30,"message"],[68,37,60,37],[68,38,60,38,"data"],[68,42,60,19],[68,43,60,6],[70,0,62,6],[70,16,62,14,"data"],[70,20,62,18],[70,21,62,19,"type"],[70,25,62,6],[71,0,63,8],[71,15,63,13],[71,34,63,8],[72,0,64,10],[72,18,64,15,"emit"],[72,22,64,10],[72,23,64,20],[72,42,64,10],[74,0,65,10],[76,0,67,8],[76,15,67,13],[76,29,67,8],[77,0,68,10],[77,18,68,15,"emit"],[77,22,68,10],[77,23,68,20],[77,37,68,10],[77,39,68,36,"data"],[77,43,68,40],[77,44,68,41,"body"],[77,48,68,10],[79,0,69,10],[81,0,71,8],[81,15,71,13],[81,23,71,8],[82,0,72,10],[82,18,72,15,"emit"],[82,22,72,10],[82,23,72,20],[82,31,72,10],[82,33,72,30,"data"],[82,37,72,34],[82,38,72,35,"body"],[82,42,72,10],[84,0,73,10],[86,0,75,8],[86,15,75,13],[86,28,75,8],[87,0,76,10],[87,18,76,15,"emit"],[87,22,76,10],[87,23,76,20],[87,36,76,10],[89,0,77,10],[91,0,79,8],[91,15,79,13],[91,22,79,8],[92,0,80,10],[92,18,80,15,"emit"],[92,22,80,10],[92,23,80,20],[92,30,80,10],[92,32,80,29,"data"],[92,36,80,33],[92,37,80,34,"body"],[92,41,80,10],[94,0,81,10],[96,0,83,8],[97,0,84,10],[97,18,84,15,"emit"],[97,22,84,10],[97,23,84,20],[97,30,84,10],[97,32,84,29],[98,0,85,12,"type"],[98,14,85,12,"type"],[98,18,85,16],[98,20,85,18],[98,37,84,29],[99,0,86,12,"message"],[99,14,86,12,"message"],[99,21,86,19],[99,23,86,21,"data"],[100,0,84,29],[100,13,84,10],[102,0,62,6],[103,0,89,5],[103,7,59,4],[105,0,33,19],[106,0,90,3],[110,30,92,10],[111,0,93,4],[111,13,93,9,"_ws"],[111,16,93,4],[111,17,93,13,"close"],[111,22,93,4],[112,0,94,3],[115,27,96,7,"message"],[115,34],[115,36,96,16],[116,0,97,4],[116,16,97,12],[116,21,97,17,"_state"],[116,27,97,4],[117,0,98,6],[117,15,98,11],[117,24,98,6],[118,0,99,8],[118,17,99,13,"_queue"],[118,23,99,8],[118,24,99,20,"push"],[118,28,99,8],[118,29,99,25,"message"],[118,36,99,8],[120,0,101,8],[122,0,103,6],[122,15,103,11],[122,21,103,6],[123,0,104,8],[123,17,104,13,"_ws"],[123,20,104,8],[123,21,104,17,"send"],[123,25,104,8],[123,26,104,22,"message"],[123,33,104,8],[125,0,106,8],[127,0,108,6],[127,15,108,11],[127,23,108,6],[128,0,110,8],[130,0,112,6],[131,0,113,8],[131,18,113,14],[131,22,113,18,"Error"],[131,27,113,14],[131,28,113,24],[131,69,113,65],[131,74,113,70,"_state"],[131,80,113,14],[131,81,113,8],[132,0,97,4],[133,0,115,3],[136,36,117,16],[137,0,117,16],[139,0,118,4],[139,13,118,9,"_queue"],[139,19,118,4],[139,20,118,16,"forEach"],[139,27,118,4],[139,28,118,24],[139,38,118,24,"message"],[139,45,118,31],[140,0,118,31],[140,17,118,35],[140,23,118,39],[140,24,118,40,"send"],[140,28,118,35],[140,29,118,45,"message"],[140,36,118,35],[140,37,118,31],[141,0,118,31],[141,9,118,4],[143,0,120,4],[143,13,120,9,"_queue"],[143,19,120,4],[143,20,120,16,"length"],[143,26,120,4],[143,29,120,25],[143,30,120,4],[144,0,121,3],[148,4,32,33,"EventEmitter"],[148,16],[150,0,124,0,"module"],[150,2,124,0,"module"],[150,8,124,6],[150,9,124,7,"exports"],[150,16,124,0],[150,19,124,17,"WebSocketHMRClient"],[150,37,124,0]]},"type":"js/module"}]}