{"dependencies":[{"name":"./EmitterSubscription","data":{"isAsync":false}},{"name":"./EventSubscriptionVendor","data":{"isAsync":false}},{"name":"fbjs/lib/emptyFunction","data":{"isAsync":false}},{"name":"fbjs/lib/invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  var EmitterSubscription = _$$_REQUIRE(_dependencyMap[0], \"./EmitterSubscription\");\n\n  var EventSubscriptionVendor = _$$_REQUIRE(_dependencyMap[1], \"./EventSubscriptionVendor\");\n\n  var emptyFunction = _$$_REQUIRE(_dependencyMap[2], \"fbjs/lib/emptyFunction\");\n\n  var invariant = _$$_REQUIRE(_dependencyMap[3], \"fbjs/lib/invariant\");\n\n  var BaseEventEmitter = function () {\n    function BaseEventEmitter() {\n      _classCallCheck(this, BaseEventEmitter);\n\n      this._subscriber = new EventSubscriptionVendor();\n      this._currentSubscription = null;\n    }\n\n    BaseEventEmitter.prototype.addListener = function addListener(eventType, listener, context) {\n      return this._subscriber.addSubscription(eventType, new EmitterSubscription(this._subscriber, listener, context));\n    };\n\n    BaseEventEmitter.prototype.once = function once(eventType, listener, context) {\n      var emitter = this;\n      return this.addListener(eventType, function () {\n        emitter.removeCurrentListener();\n        listener.apply(context, arguments);\n      });\n    };\n\n    BaseEventEmitter.prototype.removeAllListeners = function removeAllListeners(eventType) {\n      this._subscriber.removeAllSubscriptions(eventType);\n    };\n\n    BaseEventEmitter.prototype.removeCurrentListener = function removeCurrentListener() {\n      !!!this._currentSubscription ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Not in an emitting cycle; there is no current subscription') : invariant(false) : undefined;\n\n      this._subscriber.removeSubscription(this._currentSubscription);\n    };\n\n    BaseEventEmitter.prototype.listeners = function listeners(eventType) {\n      var subscriptions = this._subscriber.getSubscriptionsForType(eventType);\n\n      return subscriptions ? subscriptions.filter(emptyFunction.thatReturnsTrue).map(function (subscription) {\n        return subscription.listener;\n      }) : [];\n    };\n\n    BaseEventEmitter.prototype.emit = function emit(eventType) {\n      var subscriptions = this._subscriber.getSubscriptionsForType(eventType);\n\n      if (subscriptions) {\n        var keys = Object.keys(subscriptions);\n\n        for (var ii = 0; ii < keys.length; ii++) {\n          var key = keys[ii];\n          var subscription = subscriptions[key];\n\n          if (subscription) {\n            this._currentSubscription = subscription;\n\n            this.__emitToSubscription.apply(this, [subscription].concat(Array.prototype.slice.call(arguments)));\n          }\n        }\n\n        this._currentSubscription = null;\n      }\n    };\n\n    BaseEventEmitter.prototype.__emitToSubscription = function __emitToSubscription(subscription, eventType) {\n      var args = Array.prototype.slice.call(arguments, 2);\n      subscription.listener.apply(subscription.context, args);\n    };\n\n    return BaseEventEmitter;\n  }();\n\n  module.exports = BaseEventEmitter;\n});","map":[[2,0,13,0],[4,0,15,0],[4,11,15,9,"_classCallCheck"],[4,26,15,0],[4,27,15,25,"instance"],[4,35,15,0],[4,37,15,35,"Constructor"],[4,48,15,0],[4,50,15,48],[5,0,15,50],[5,8,15,54],[5,10,15,56,"instance"],[5,18,15,64],[5,30,15,76,"Constructor"],[5,41,15,54],[5,42,15,50],[5,44,15,90],[6,0,15,92],[6,12,15,98],[6,16,15,102,"TypeError"],[6,25,15,98],[6,26,15,112],[6,61,15,98],[6,62,15,92],[7,0,15,151],[8,0,15,153],[10,0,17,0],[10,6,17,4,"EmitterSubscription"],[10,25,17,23],[10,28,17,26,"require"],[10,39,17,33],[10,83,17,0],[12,0,18,0],[12,6,18,4,"EventSubscriptionVendor"],[12,29,18,27],[12,32,18,30,"require"],[12,43,18,37],[12,91,18,0],[14,0,20,0],[14,6,20,4,"emptyFunction"],[14,19,20,17],[14,22,20,20,"require"],[14,33,20,27],[14,78,20,0],[16,0,21,0],[16,6,21,4,"invariant"],[16,15,21,13],[16,18,21,16,"require"],[16,29,21,23],[16,70,21,0],[18,0,37,0],[18,6,37,4,"BaseEventEmitter"],[18,22,37,20],[18,25,37,24],[18,37,37,36],[19,0,42,2],[19,13,42,11,"BaseEventEmitter"],[19,29,42,2],[19,32,42,30],[20,0,43,4,"_classCallCheck"],[20,6,43,4,"_classCallCheck"],[20,21,43,19],[20,22,43,20],[20,26,43,19],[20,28,43,26,"BaseEventEmitter"],[20,44,43,19],[20,45,43,4],[22,0,45,4],[22,11,45,9,"_subscriber"],[22,22,45,4],[22,25,45,23],[22,29,45,27,"EventSubscriptionVendor"],[22,52,45,23],[22,54,45,4],[23,0,46,4],[23,11,46,9,"_currentSubscription"],[23,31,46,4],[23,34,46,32],[23,38,46,4],[24,0,47,3],[26,0,64,2,"BaseEventEmitter"],[26,4,64,2,"BaseEventEmitter"],[26,20,64,18],[26,21,64,19,"prototype"],[26,30,64,2],[26,31,64,29,"addListener"],[26,42,64,2],[26,45,64,43],[26,54,64,52,"addListener"],[26,65,64,43],[26,66,64,64,"eventType"],[26,75,64,43],[26,77,64,75,"listener"],[26,85,64,43],[26,87,64,85,"context"],[26,94,64,43],[26,96,64,94],[27,0,65,4],[27,13,65,11],[27,18,65,16,"_subscriber"],[27,29,65,11],[27,30,65,28,"addSubscription"],[27,45,65,11],[27,46,65,44,"eventType"],[27,55,65,11],[27,57,65,55],[27,61,65,59,"EmitterSubscription"],[27,80,65,55],[27,81,65,79],[27,86,65,84,"_subscriber"],[27,97,65,55],[27,99,65,97,"listener"],[27,107,65,55],[27,109,65,107,"context"],[27,116,65,55],[27,117,65,11],[27,118,65,4],[28,0,66,3],[28,5,64,2],[30,0,79,2,"BaseEventEmitter"],[30,4,79,2,"BaseEventEmitter"],[30,20,79,18],[30,21,79,19,"prototype"],[30,30,79,2],[30,31,79,29,"once"],[30,35,79,2],[30,38,79,36],[30,47,79,45,"once"],[30,51,79,36],[30,52,79,50,"eventType"],[30,61,79,36],[30,63,79,61,"listener"],[30,71,79,36],[30,73,79,71,"context"],[30,80,79,36],[30,82,79,80],[31,0,80,4],[31,10,80,8,"emitter"],[31,17,80,15],[31,20,80,18],[31,24,80,4],[32,0,81,4],[32,13,81,11],[32,18,81,16,"addListener"],[32,29,81,11],[32,30,81,28,"eventType"],[32,39,81,11],[32,41,81,39],[32,53,81,51],[33,0,82,6,"emitter"],[33,8,82,6,"emitter"],[33,15,82,13],[33,16,82,14,"removeCurrentListener"],[33,37,82,6],[34,0,83,6,"listener"],[34,8,83,6,"listener"],[34,16,83,14],[34,17,83,15,"apply"],[34,22,83,6],[34,23,83,21,"context"],[34,30,83,6],[34,32,83,30,"arguments"],[34,41,83,6],[35,0,84,5],[35,7,81,11],[35,8,81,4],[36,0,85,3],[36,5,79,2],[38,0,95,2,"BaseEventEmitter"],[38,4,95,2,"BaseEventEmitter"],[38,20,95,18],[38,21,95,19,"prototype"],[38,30,95,2],[38,31,95,29,"removeAllListeners"],[38,49,95,2],[38,52,95,50],[38,61,95,59,"removeAllListeners"],[38,79,95,50],[38,80,95,78,"eventType"],[38,89,95,50],[38,91,95,89],[39,0,96,4],[39,11,96,9,"_subscriber"],[39,22,96,4],[39,23,96,21,"removeAllSubscriptions"],[39,45,96,4],[39,46,96,44,"eventType"],[39,55,96,4],[40,0,97,3],[40,5,95,2],[42,0,121,2,"BaseEventEmitter"],[42,4,121,2,"BaseEventEmitter"],[42,20,121,18],[42,21,121,19,"prototype"],[42,30,121,2],[42,31,121,29,"removeCurrentListener"],[42,52,121,2],[42,55,121,53],[42,64,121,62,"removeCurrentListener"],[42,85,121,53],[42,88,121,86],[43,0,122,4],[43,7,122,5],[43,8,122,6],[43,9,122,7],[43,14,122,12,"_currentSubscription"],[43,34,122,4],[43,37,122,35,"process"],[43,44,122,42],[43,45,122,43,"env"],[43,48,122,35],[43,49,122,47,"NODE_ENV"],[43,57,122,35],[43,62,122,60],[43,74,122,35],[43,77,122,75,"invariant"],[43,86,122,84],[43,87,122,85],[43,92,122,84],[43,94,122,92],[43,154,122,84],[43,155,122,35],[43,158,122,156,"invariant"],[43,167,122,165],[43,168,122,166],[43,173,122,165],[43,174,122,4],[43,177,122,175,"undefined"],[43,186,122,4],[45,0,123,4],[45,11,123,9,"_subscriber"],[45,22,123,4],[45,23,123,21,"removeSubscription"],[45,41,123,4],[45,42,123,40],[45,47,123,45,"_currentSubscription"],[45,67,123,4],[46,0,124,3],[46,5,121,2],[48,0,134,2,"BaseEventEmitter"],[48,4,134,2,"BaseEventEmitter"],[48,20,134,18],[48,21,134,19,"prototype"],[48,30,134,2],[48,31,134,29,"listeners"],[48,40,134,2],[48,43,134,41],[48,52,134,50,"listeners"],[48,61,134,41],[48,62,134,60,"eventType"],[48,71,134,41],[48,73,134,107],[49,0,135,4],[49,10,135,8,"subscriptions"],[49,23,135,21],[49,26,135,24],[49,31,135,29,"_subscriber"],[49,42,135,24],[49,43,135,41,"getSubscriptionsForType"],[49,66,135,24],[49,67,135,65,"eventType"],[49,76,135,24],[49,77,135,4],[51,0,136,4],[51,13,136,11,"subscriptions"],[51,26,136,24],[51,29,136,27,"subscriptions"],[51,42,136,40],[51,43,136,41,"filter"],[51,49,136,27],[51,50,136,48,"emptyFunction"],[51,63,136,61],[51,64,136,62,"thatReturnsTrue"],[51,79,136,27],[51,81,136,79,"map"],[51,84,136,27],[51,85,136,83],[51,95,136,93,"subscription"],[51,107,136,83],[51,109,136,107],[52,0,137,6],[52,15,137,13,"subscription"],[52,27,137,25],[52,28,137,26,"listener"],[52,36,137,6],[53,0,138,5],[53,7,136,27],[53,8,136,24],[53,11,138,9],[53,13,136,4],[54,0,139,3],[54,5,134,2],[56,0,156,2,"BaseEventEmitter"],[56,4,156,2,"BaseEventEmitter"],[56,20,156,18],[56,21,156,19,"prototype"],[56,30,156,2],[56,31,156,29,"emit"],[56,35,156,2],[56,38,156,36],[56,47,156,45,"emit"],[56,51,156,36],[56,52,156,50,"eventType"],[56,61,156,36],[56,63,156,61],[57,0,157,4],[57,10,157,8,"subscriptions"],[57,23,157,21],[57,26,157,24],[57,31,157,29,"_subscriber"],[57,42,157,24],[57,43,157,41,"getSubscriptionsForType"],[57,66,157,24],[57,67,157,65,"eventType"],[57,76,157,24],[57,77,157,4],[59,0,158,4],[59,10,158,8,"subscriptions"],[59,23,158,4],[59,25,158,23],[60,0,159,6],[60,12,159,10,"keys"],[60,16,159,14],[60,19,159,17,"Object"],[60,25,159,23],[60,26,159,24,"keys"],[60,30,159,17],[60,31,159,29,"subscriptions"],[60,44,159,17],[60,45,159,6],[62,0,160,6],[62,13,160,11],[62,17,160,15,"ii"],[62,19,160,17],[62,22,160,20],[62,23,160,6],[62,25,160,23,"ii"],[62,27,160,25],[62,30,160,28,"keys"],[62,34,160,32],[62,35,160,33,"length"],[62,41,160,6],[62,43,160,41,"ii"],[62,45,160,43],[62,47,160,6],[62,49,160,47],[63,0,161,8],[63,14,161,12,"key"],[63,17,161,15],[63,20,161,18,"keys"],[63,24,161,22],[63,25,161,23,"ii"],[63,27,161,22],[63,28,161,8],[64,0,162,8],[64,14,162,12,"subscription"],[64,26,162,24],[64,29,162,27,"subscriptions"],[64,42,162,40],[64,43,162,41,"key"],[64,46,162,40],[64,47,162,8],[66,0,164,8],[66,14,164,12,"subscription"],[66,26,164,8],[66,28,164,26],[67,0,165,10],[67,17,165,15,"_currentSubscription"],[67,37,165,10],[67,40,165,38,"subscription"],[67,52,165,10],[69,0,166,10],[69,17,166,15,"__emitToSubscription"],[69,37,166,10],[69,38,166,36,"apply"],[69,43,166,10],[69,44,166,42],[69,48,166,10],[69,50,166,48],[69,51,166,49,"subscription"],[69,63,166,48],[69,65,166,63,"concat"],[69,71,166,48],[69,72,166,70,"Array"],[69,77,166,75],[69,78,166,76,"prototype"],[69,87,166,70],[69,88,166,86,"slice"],[69,93,166,70],[69,94,166,92,"call"],[69,98,166,70],[69,99,166,97,"arguments"],[69,108,166,70],[69,109,166,48],[69,110,166,10],[70,0,167,9],[71,0,168,7],[73,0,169,6],[73,13,169,11,"_currentSubscription"],[73,33,169,6],[73,36,169,34],[73,40,169,6],[74,0,170,5],[75,0,171,3],[75,5,156,2],[77,0,183,2,"BaseEventEmitter"],[77,4,183,2,"BaseEventEmitter"],[77,20,183,18],[77,21,183,19,"prototype"],[77,30,183,2],[77,31,183,29,"__emitToSubscription"],[77,51,183,2],[77,54,183,52],[77,63,183,61,"__emitToSubscription"],[77,83,183,52],[77,84,183,82,"subscription"],[77,96,183,52],[77,98,183,96,"eventType"],[77,107,183,52],[77,109,183,107],[78,0,184,4],[78,10,184,8,"args"],[78,14,184,12],[78,17,184,15,"Array"],[78,22,184,20],[78,23,184,21,"prototype"],[78,32,184,15],[78,33,184,31,"slice"],[78,38,184,15],[78,39,184,37,"call"],[78,43,184,15],[78,44,184,42,"arguments"],[78,53,184,15],[78,55,184,53],[78,56,184,15],[78,57,184,4],[79,0,185,4,"subscription"],[79,6,185,4,"subscription"],[79,18,185,16],[79,19,185,17,"listener"],[79,27,185,4],[79,28,185,26,"apply"],[79,33,185,4],[79,34,185,32,"subscription"],[79,46,185,44],[79,47,185,45,"context"],[79,54,185,4],[79,56,185,54,"args"],[79,60,185,4],[80,0,186,3],[80,5,183,2],[82,0,188,2],[82,11,188,9,"BaseEventEmitter"],[82,27,188,2],[83,0,189,1],[83,3,37,23],[83,5,37,0],[85,0,191,0,"module"],[85,2,191,0,"module"],[85,8,191,6],[85,9,191,7,"exports"],[85,16,191,0],[85,19,191,17,"BaseEventEmitter"],[85,35,191,0]]},"type":"js/module"}]}