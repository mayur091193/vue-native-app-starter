{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@unimodules/core","data":{"isAsync":false}},{"name":"path-browserify","data":{"isAsync":false}},{"name":"react-native","data":{"isAsync":false}},{"name":"url-parse","data":{"isAsync":false}},{"name":"./AssetSourceResolver","data":{"isAsync":false}},{"name":"./PlatformUtils","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.selectAssetSource = selectAssetSource;\n  exports.resolveUri = resolveUri;\n\n  var _defineProperty2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/defineProperty\"));\n\n  var _core = _$$_REQUIRE(_dependencyMap[2], \"@unimodules/core\");\n\n  var _pathBrowserify = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"path-browserify\"));\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[4], \"react-native\");\n\n  var _urlParse = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"url-parse\"));\n\n  var _AssetSourceResolver = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"./AssetSourceResolver\"));\n\n  var _PlatformUtils = _$$_REQUIRE(_dependencyMap[7], \"./PlatformUtils\");\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  var assetMapOverride = (0, _PlatformUtils.getManifest)().assetMapOverride;\n\n  function selectAssetSource(meta) {\n    if (assetMapOverride && assetMapOverride.hasOwnProperty(meta.hash)) {\n      meta = _objectSpread({}, meta, {}, assetMapOverride[meta.hash]);\n    }\n\n    var scale = _AssetSourceResolver.default.pickScale(meta.scales, _reactNative.PixelRatio.get());\n\n    var index = meta.scales.findIndex(function (s) {\n      return s === scale;\n    });\n    var hash = meta.fileHashes ? meta.fileHashes[index] || meta.fileHashes[0] : meta.hash;\n    var uri = meta.fileUris ? meta.fileUris[index] || meta.fileUris[0] : meta.uri;\n\n    if (uri) {\n      return {\n        uri: resolveUri(uri),\n        hash: hash\n      };\n    }\n\n    var assetUrlOverride = (0, _PlatformUtils.getManifest)().assetUrlOverride;\n\n    if (assetUrlOverride) {\n      var _uri = _pathBrowserify.default.join(assetUrlOverride, hash);\n\n      return {\n        uri: resolveUri(_uri),\n        hash: hash\n      };\n    }\n\n    var fileScale = scale === 1 ? '' : \"@\" + scale + \"x\";\n    var fileExtension = meta.type ? \".\" + encodeURIComponent(meta.type) : '';\n    var suffix = \"/\" + encodeURIComponent(meta.name) + fileScale + fileExtension + \"?platform=\" + encodeURIComponent(_core.Platform.OS) + \"&hash=\" + encodeURIComponent(meta.hash);\n\n    if (/^https?:\\/\\//.test(meta.httpServerLocation)) {\n      var _uri2 = meta.httpServerLocation + suffix;\n\n      return {\n        uri: _uri2,\n        hash: hash\n      };\n    }\n\n    if ((0, _PlatformUtils.getManifest)().developer) {\n      var baseUrl = new _urlParse.default((0, _PlatformUtils.getManifest)().bundleUrl);\n      baseUrl.set('pathname', meta.httpServerLocation + suffix);\n      return {\n        uri: baseUrl.href,\n        hash: hash\n      };\n    }\n\n    return {\n      uri: \"https://d1wp6m56sqw74a.cloudfront.net/~assets/\" + encodeURIComponent(hash),\n      hash: hash\n    };\n  }\n\n  function resolveUri(uri) {\n    if (!_PlatformUtils.manifestBaseUrl) {\n      return uri;\n    }\n\n    var _ref = new _urlParse.default(uri),\n        protocol = _ref.protocol;\n\n    if (protocol !== '') {\n      return uri;\n    }\n\n    var baseUrl = new _urlParse.default(_PlatformUtils.manifestBaseUrl);\n    var resolvedPath = uri.startsWith('/') ? uri : _pathBrowserify.default.join(baseUrl.pathname, uri);\n    baseUrl.set('pathname', resolvedPath);\n    return baseUrl.href;\n  }\n});","map":[[12,0,1,0],[14,0,2,0],[16,0,3,0],[18,0,4,0],[20,0,5,0],[22,0,6,0],[28,0,8,0],[28,6,8,6,"assetMapOverride"],[28,22,8,22],[28,25,8,25],[28,59,8,39,"assetMapOverride"],[28,75,8,0],[30,0,15,7],[30,11,15,16,"selectAssetSource"],[30,28,15,7],[30,29,15,34,"meta"],[30,33,15,7],[30,35,15,40],[31,0,17,4],[31,8,17,8,"assetMapOverride"],[31,24,17,24],[31,28,17,28,"assetMapOverride"],[31,44,17,44],[31,45,17,45,"hasOwnProperty"],[31,59,17,28],[31,60,17,60,"meta"],[31,64,17,64],[31,65,17,65,"hash"],[31,69,17,28],[31,70,17,4],[31,72,17,72],[32,0,18,8,"meta"],[32,6,18,8,"meta"],[32,10,18,12],[32,31,18,20,"meta"],[32,35,18,12],[32,41,18,29,"assetMapOverride"],[32,57,18,45],[32,58,18,46,"meta"],[32,62,18,50],[32,63,18,51,"hash"],[32,67,18,45],[32,68,18,12],[32,69,18,8],[33,0,19,5],[35,0,22,4],[35,8,22,10,"scale"],[35,13,22,15],[35,16,22,18,"AssetSourceResolver"],[35,45,22,38,"pickScale"],[35,54,22,18],[35,55,22,48,"meta"],[35,59,22,52],[35,60,22,53,"scales"],[35,66,22,18],[35,68,22,61,"PixelRatio"],[35,92,22,72,"get"],[35,95,22,61],[35,97,22,18],[35,98,22,4],[37,0,23,4],[37,8,23,10,"index"],[37,13,23,15],[37,16,23,18,"meta"],[37,20,23,22],[37,21,23,23,"scales"],[37,27,23,18],[37,28,23,30,"findIndex"],[37,37,23,18],[37,38,23,40],[37,48,23,40,"s"],[37,49,23,41],[38,0,23,41],[38,13,23,45,"s"],[38,14,23,46],[38,19,23,51,"scale"],[38,24,23,41],[39,0,23,41],[39,5,23,18],[39,6,23,4],[40,0,24,4],[40,8,24,10,"hash"],[40,12,24,14],[40,15,24,17,"meta"],[40,19,24,21],[40,20,24,22,"fileHashes"],[40,30,24,17],[40,33,24,35,"meta"],[40,37,24,39],[40,38,24,40,"fileHashes"],[40,48,24,35],[40,49,24,51,"index"],[40,54,24,35],[40,59,24,61,"meta"],[40,63,24,65],[40,64,24,66,"fileHashes"],[40,74,24,61],[40,75,24,77],[40,76,24,61],[40,77,24,17],[40,80,24,82,"meta"],[40,84,24,86],[40,85,24,87,"hash"],[40,89,24,4],[41,0,26,4],[41,8,26,10,"uri"],[41,11,26,13],[41,14,26,16,"meta"],[41,18,26,20],[41,19,26,21,"fileUris"],[41,27,26,16],[41,30,26,32,"meta"],[41,34,26,36],[41,35,26,37,"fileUris"],[41,43,26,32],[41,44,26,46,"index"],[41,49,26,32],[41,54,26,56,"meta"],[41,58,26,60],[41,59,26,61,"fileUris"],[41,67,26,56],[41,68,26,70],[41,69,26,56],[41,70,26,16],[41,73,26,75,"meta"],[41,77,26,79],[41,78,26,80,"uri"],[41,81,26,4],[43,0,27,4],[43,8,27,8,"uri"],[43,11,27,4],[43,13,27,13],[44,0,28,8],[44,13,28,15],[45,0,28,17,"uri"],[45,8,28,17,"uri"],[45,11,28,20],[45,13,28,22,"resolveUri"],[45,23,28,32],[45,24,28,33,"uri"],[45,27,28,32],[45,28,28,15],[46,0,28,39,"hash"],[46,8,28,39,"hash"],[46,12,28,43],[46,14,28,39,"hash"],[47,0,28,15],[47,7,28,8],[48,0,29,5],[50,0,31,4],[50,8,31,10,"assetUrlOverride"],[50,24,31,26],[50,27,31,29],[50,61,31,43,"assetUrlOverride"],[50,77,31,4],[52,0,32,4],[52,8,32,8,"assetUrlOverride"],[52,24,32,4],[52,26,32,26],[53,0,33,8],[53,10,33,14,"uri"],[53,14,33,17],[53,17,33,20,"path"],[53,41,33,25,"join"],[53,45,33,20],[53,46,33,30,"assetUrlOverride"],[53,62,33,20],[53,64,33,48,"hash"],[53,68,33,20],[53,69,33,8],[55,0,34,8],[55,13,34,15],[56,0,34,17,"uri"],[56,8,34,17,"uri"],[56,11,34,20],[56,13,34,22,"resolveUri"],[56,23,34,32],[56,24,34,33,"uri"],[56,28,34,32],[56,29,34,15],[57,0,34,39,"hash"],[57,8,34,39,"hash"],[57,12,34,43],[57,14,34,39,"hash"],[58,0,34,15],[58,7,34,8],[59,0,35,5],[61,0,36,4],[61,8,36,10,"fileScale"],[61,17,36,19],[61,20,36,22,"scale"],[61,25,36,27],[61,30,36,32],[61,31,36,22],[61,34,36,36],[61,36,36,22],[61,45,36,45,"scale"],[61,50,36,22],[61,56,36,4],[62,0,37,4],[62,8,37,10,"fileExtension"],[62,21,37,23],[62,24,37,26,"meta"],[62,28,37,30],[62,29,37,31,"type"],[62,33,37,26],[62,42,37,42,"encodeURIComponent"],[62,60,37,60],[62,61,37,61,"meta"],[62,65,37,65],[62,66,37,66,"type"],[62,70,37,60],[62,71,37,26],[62,74,37,76],[62,76,37,4],[63,0,38,4],[63,8,38,10,"suffix"],[63,14,38,16],[63,23,38,23,"encodeURIComponent"],[63,41,38,41],[63,42,38,42,"meta"],[63,46,38,46],[63,47,38,47,"name"],[63,51,38,41],[63,52,38,16],[63,55,38,55,"fileScale"],[63,64,38,16],[63,67,38,67,"fileExtension"],[63,80,38,16],[63,98,38,93,"encodeURIComponent"],[63,116,38,111],[63,117,38,112,"Platform"],[63,132,38,121,"OS"],[63,134,38,111],[63,135,38,16],[63,149,38,133,"encodeURIComponent"],[63,167,38,151],[63,168,38,152,"meta"],[63,172,38,156],[63,173,38,157,"hash"],[63,177,38,151],[63,178,38,4],[65,0,41,4],[65,8,41,8],[65,23,41,23,"test"],[65,27,41,8],[65,28,41,28,"meta"],[65,32,41,32],[65,33,41,33,"httpServerLocation"],[65,51,41,8],[65,52,41,4],[65,54,41,54],[66,0,42,8],[66,10,42,14,"uri"],[66,15,42,17],[66,18,42,20,"meta"],[66,22,42,24],[66,23,42,25,"httpServerLocation"],[66,41,42,20],[66,44,42,46,"suffix"],[66,50,42,8],[68,0,43,8],[68,13,43,15],[69,0,43,17,"uri"],[69,8,43,17,"uri"],[69,11,43,20],[69,13,43,17,"uri"],[69,18,43,15],[70,0,43,22,"hash"],[70,8,43,22,"hash"],[70,12,43,26],[70,14,43,22,"hash"],[71,0,43,15],[71,7,43,8],[72,0,44,5],[74,0,46,4],[74,8,46,8],[74,42,46,22,"developer"],[74,51,46,4],[74,53,46,33],[75,0,47,8],[75,10,47,14,"baseUrl"],[75,17,47,21],[75,20,47,24],[75,24,47,28,"URL"],[75,41,47,24],[75,42,47,32],[75,76,47,46,"bundleUrl"],[75,85,47,24],[75,86,47,8],[76,0,48,8,"baseUrl"],[76,6,48,8,"baseUrl"],[76,13,48,15],[76,14,48,16,"set"],[76,17,48,8],[76,18,48,20],[76,28,48,8],[76,30,48,32,"meta"],[76,34,48,36],[76,35,48,37,"httpServerLocation"],[76,53,48,32],[76,56,48,58,"suffix"],[76,62,48,8],[77,0,49,8],[77,13,49,15],[78,0,49,17,"uri"],[78,8,49,17,"uri"],[78,11,49,20],[78,13,49,22,"baseUrl"],[78,20,49,29],[78,21,49,30,"href"],[78,25,49,15],[79,0,49,36,"hash"],[79,8,49,36,"hash"],[79,12,49,40],[79,14,49,36,"hash"],[80,0,49,15],[80,7,49,8],[81,0,50,5],[83,0,52,4],[83,11,52,11],[84,0,53,8,"uri"],[84,6,53,8,"uri"],[84,9,53,11],[84,62,53,62,"encodeURIComponent"],[84,80,53,80],[84,81,53,81,"hash"],[84,85,53,80],[84,86,52,11],[85,0,54,8,"hash"],[85,6,54,8,"hash"],[85,10,54,12],[85,12,54,8,"hash"],[86,0,52,11],[86,5,52,4],[87,0,56,1],[89,0,62,7],[89,11,62,16,"resolveUri"],[89,21,62,7],[89,22,62,27,"uri"],[89,25,62,7],[89,27,62,32],[90,0,63,4],[90,8,63,8],[90,9,63,9,"manifestBaseUrl"],[90,39,63,4],[90,41,63,26],[91,0,64,8],[91,13,64,15,"uri"],[91,16,64,8],[92,0,65,5],[94,0,62,32],[94,15,66,25],[94,19,66,29,"URL"],[94,36,66,25],[94,37,66,33,"uri"],[94,40,66,25],[94,41,62,32],[95,0,62,32],[95,8,66,12,"protocol"],[95,16,62,32],[95,24,66,12,"protocol"],[95,32,62,32],[97,0,67,4],[97,8,67,8,"protocol"],[97,16,67,16],[97,21,67,21],[97,23,67,4],[97,25,67,25],[98,0,68,8],[98,13,68,15,"uri"],[98,16,68,8],[99,0,69,5],[101,0,70,4],[101,8,70,10,"baseUrl"],[101,15,70,17],[101,18,70,20],[101,22,70,24,"URL"],[101,39,70,20],[101,40,70,28,"manifestBaseUrl"],[101,70,70,20],[101,71,70,4],[102,0,71,4],[102,8,71,10,"resolvedPath"],[102,20,71,22],[102,23,71,25,"uri"],[102,26,71,28],[102,27,71,29,"startsWith"],[102,37,71,25],[102,38,71,40],[102,41,71,25],[102,45,71,47,"uri"],[102,48,71,25],[102,51,71,53,"path"],[102,75,71,58,"join"],[102,79,71,53],[102,80,71,63,"baseUrl"],[102,87,71,70],[102,88,71,71,"pathname"],[102,96,71,53],[102,98,71,81,"uri"],[102,101,71,53],[102,102,71,4],[103,0,72,4,"baseUrl"],[103,4,72,4,"baseUrl"],[103,11,72,11],[103,12,72,12,"set"],[103,15,72,4],[103,16,72,16],[103,26,72,4],[103,28,72,28,"resolvedPath"],[103,40,72,4],[104,0,73,4],[104,11,73,11,"baseUrl"],[104,18,73,18],[104,19,73,19,"href"],[104,23,73,4],[105,0,74,1]]},"type":"js/module"}]}