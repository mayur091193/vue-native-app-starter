{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"@unimodules/core","data":{"isAsync":false}},{"name":"fbemitter","data":{"isAsync":false}},{"name":"./ExponentUpdates","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.reload = reload;\n  exports.reloadFromCache = reloadFromCache;\n  exports.checkForUpdateAsync = checkForUpdateAsync;\n  exports.fetchUpdateAsync = fetchUpdateAsync;\n  exports.clearUpdateCacheExperimentalAsync = clearUpdateCacheExperimentalAsync;\n  exports.addListener = addListener;\n  exports.EventType = void 0;\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/regenerator\"));\n\n  var _core = _$$_REQUIRE(_dependencyMap[2], \"@unimodules/core\");\n\n  var _fbemitter = _$$_REQUIRE(_dependencyMap[3], \"fbemitter\");\n\n  var _ExponentUpdates = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"./ExponentUpdates\"));\n\n  function reload() {\n    return _regenerator.default.async(function reload$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regenerator.default.awrap(_ExponentUpdates.default.reload());\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  }\n\n  function reloadFromCache() {\n    return _regenerator.default.async(function reloadFromCache$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regenerator.default.awrap(_ExponentUpdates.default.reloadFromCache());\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  }\n\n  function checkForUpdateAsync() {\n    var result;\n    return _regenerator.default.async(function checkForUpdateAsync$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (_ExponentUpdates.default.checkForUpdateAsync) {\n              _context3.next = 2;\n              break;\n            }\n\n            throw new _core.UnavailabilityError('Updates', 'checkForUpdateAsync');\n\n          case 2:\n            _context3.next = 4;\n            return _regenerator.default.awrap(_ExponentUpdates.default.checkForUpdateAsync());\n\n          case 4:\n            result = _context3.sent;\n\n            if (result) {\n              _context3.next = 7;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", {\n              isAvailable: false\n            });\n\n          case 7:\n            return _context3.abrupt(\"return\", {\n              isAvailable: true,\n              manifest: typeof result === 'string' ? JSON.parse(result) : result\n            });\n\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  }\n\n  function fetchUpdateAsync() {\n    var _ref,\n        eventListener,\n        subscription,\n        result,\n        _args4 = arguments;\n\n    return _regenerator.default.async(function fetchUpdateAsync$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _ref = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {}, eventListener = _ref.eventListener;\n\n            if (_ExponentUpdates.default.fetchUpdateAsync) {\n              _context4.next = 3;\n              break;\n            }\n\n            throw new _core.UnavailabilityError('Updates', 'fetchUpdateAsync');\n\n          case 3:\n            if (eventListener && typeof eventListener === 'function') {\n              subscription = addListener(eventListener);\n            }\n\n            _context4.prev = 4;\n            _context4.next = 7;\n            return _regenerator.default.awrap(_ExponentUpdates.default.fetchUpdateAsync());\n\n          case 7:\n            result = _context4.sent;\n\n          case 8:\n            _context4.prev = 8;\n            subscription && subscription.remove();\n            return _context4.finish(8);\n\n          case 11:\n            if (result) {\n              _context4.next = 13;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", {\n              isNew: false\n            });\n\n          case 13:\n            return _context4.abrupt(\"return\", {\n              isNew: true,\n              manifest: typeof result === 'string' ? JSON.parse(result) : result\n            });\n\n          case 14:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[4,, 8, 11]]);\n  }\n\n  function clearUpdateCacheExperimentalAsync(abiVersion) {\n    return _regenerator.default.async(function clearUpdateCacheExperimentalAsync$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            if (_ExponentUpdates.default.clearUpdateCacheAsync) {\n              _context5.next = 2;\n              break;\n            }\n\n            throw new _core.UnavailabilityError('Updates', 'clearUpdateCacheAsync');\n\n          case 2:\n            return _context5.abrupt(\"return\", _ExponentUpdates.default.clearUpdateCacheAsync(abiVersion));\n\n          case 3:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    });\n  }\n\n  var _emitter;\n\n  function _getEmitter() {\n    if (!_emitter) {\n      _emitter = new _fbemitter.EventEmitter();\n\n      _core.RCTDeviceEventEmitter.addListener('Exponent.nativeUpdatesEvent', _emitEvent);\n    }\n\n    return _emitter;\n  }\n\n  function _emitEvent(params) {\n    var newParams = params;\n\n    if (typeof params === 'string') {\n      newParams = JSON.parse(params);\n    }\n\n    if (newParams.manifestString) {\n      newParams.manifest = JSON.parse(newParams.manifestString);\n      delete newParams.manifestString;\n    }\n\n    if (!_emitter) {\n      throw new Error(\"EventEmitter must be initialized to use from its listener\");\n    }\n\n    _emitter.emit('Exponent.updatesEvent', newParams);\n  }\n\n  function addListener(listener) {\n    var emitter = _getEmitter();\n\n    return emitter.addListener('Exponent.updatesEvent', listener);\n  }\n\n  var EventType = {\n    DOWNLOAD_STARTED: 'downloadStart',\n    DOWNLOAD_PROGRESS: 'downloadProgress',\n    DOWNLOAD_FINISHED: 'downloadFinished',\n    NO_UPDATE_AVAILABLE: 'noUpdateAvailable',\n    ERROR: 'error'\n  };\n  exports.EventType = EventType;\n});","map":[[17,0,1,0],[19,0,2,0],[21,0,3,0],[23,0,4,7],[23,11,4,22,"reload"],[23,17,4,7],[24,0,4,7],[25,0,4,7],[26,0,4,7],[27,0,4,7],[28,0,4,7],[29,0,4,7],[29,46,5,10,"ExponentUpdates"],[29,71,5,26,"reload"],[29,77,5,10],[29,79,4,7],[31,0,4,7],[32,0,4,7],[33,0,4,7],[34,0,4,7],[35,0,4,7],[36,0,4,7],[37,0,4,7],[39,0,7,7],[39,11,7,22,"reloadFromCache"],[39,26,7,7],[40,0,7,7],[41,0,7,7],[42,0,7,7],[43,0,7,7],[44,0,7,7],[45,0,7,7],[45,46,8,10,"ExponentUpdates"],[45,71,8,26,"reloadFromCache"],[45,86,8,10],[45,88,7,7],[47,0,7,7],[48,0,7,7],[49,0,7,7],[50,0,7,7],[51,0,7,7],[52,0,7,7],[53,0,7,7],[55,0,10,7],[55,11,10,22,"checkForUpdateAsync"],[55,30,10,7],[56,0,10,7],[57,0,10,7],[58,0,10,7],[59,0,10,7],[60,0,10,7],[61,0,10,7],[61,16,11,9,"ExponentUpdates"],[61,41,11,25,"checkForUpdateAsync"],[61,60,10,7],[62,0,10,7],[63,0,10,7],[64,0,10,7],[66,0,10,7],[66,18,12,14],[66,22,12,18,"UnavailabilityError"],[66,47,12,14],[66,48,12,38],[66,57,12,14],[66,59,12,49],[66,80,12,14],[66,81,10,7],[68,0,10,7],[69,0,10,7],[70,0,10,7],[70,46,14,25,"ExponentUpdates"],[70,71,14,41,"checkForUpdateAsync"],[70,90,14,25],[70,92,10,7],[72,0,10,7],[73,0,14,10,"result"],[73,12,14,10,"result"],[73,18,10,7],[75,0,10,7],[75,16,15,9,"result"],[75,22,10,7],[76,0,10,7],[77,0,10,7],[78,0,10,7],[80,0,10,7],[80,46,16,15],[81,0,16,17,"isAvailable"],[81,14,16,17,"isAvailable"],[81,25,16,28],[81,27,16,30],[82,0,16,15],[82,13,10,7],[84,0,10,7],[85,0,10,7],[85,46,18,11],[86,0,19,8,"isAvailable"],[86,14,19,8,"isAvailable"],[86,25,19,19],[86,27,19,21],[86,31,18,11],[87,0,20,8,"manifest"],[87,14,20,8,"manifest"],[87,22,20,16],[87,24,20,18],[87,31,20,25,"result"],[87,37,20,18],[87,42,20,36],[87,50,20,18],[87,53,20,47,"JSON"],[87,57,20,51],[87,58,20,52,"parse"],[87,63,20,47],[87,64,20,58,"result"],[87,70,20,47],[87,71,20,18],[87,74,20,68,"result"],[88,0,18,11],[88,13,10,7],[90,0,10,7],[91,0,10,7],[92,0,10,7],[93,0,10,7],[94,0,10,7],[95,0,10,7],[96,0,10,7],[98,0,23,7],[98,11,23,22,"fetchUpdateAsync"],[98,27,23,7],[99,0,23,7],[100,0,23,7],[101,0,23,7],[102,0,23,7],[103,0,23,7],[105,0,23,7],[106,0,23,7],[107,0,23,7],[108,0,23,7],[109,0,23,7],[109,78,23,60],[109,80,23,7],[109,82,23,41,"eventListener"],[109,95,23,7],[109,103,23,41,"eventListener"],[109,116,23,7],[111,0,23,7],[111,16,24,9,"ExponentUpdates"],[111,41,24,25,"fetchUpdateAsync"],[111,57,23,7],[112,0,23,7],[113,0,23,7],[114,0,23,7],[116,0,23,7],[116,18,25,14],[116,22,25,18,"UnavailabilityError"],[116,47,25,14],[116,48,25,38],[116,57,25,14],[116,59,25,49],[116,77,25,14],[116,78,23,7],[118,0,23,7],[119,0,29,4],[119,16,29,8,"eventListener"],[119,29,29,21],[119,33,29,25],[119,40,29,32,"eventListener"],[119,53,29,25],[119,58,29,50],[119,68,29,4],[119,70,29,62],[120,0,30,8,"subscription"],[120,14,30,8,"subscription"],[120,26,30,20],[120,29,30,23,"addListener"],[120,40,30,34],[120,41,30,35,"eventListener"],[120,54,30,34],[120,55,30,8],[121,0,31,5],[123,0,23,7],[124,0,23,7],[125,0,23,7],[125,46,33,23,"ExponentUpdates"],[125,71,33,39,"fetchUpdateAsync"],[125,87,33,23],[125,89,23,7],[127,0,23,7],[128,0,33,8,"result"],[128,12,33,8,"result"],[128,18,23,7],[130,0,23,7],[131,0,23,7],[132,0,36,8,"subscription"],[132,12,36,8,"subscription"],[132,24,36,20],[132,28,36,24,"subscription"],[132,40,36,36],[132,41,36,37,"remove"],[132,47,36,24],[132,49,36,8],[133,0,23,7],[135,0,23,7],[136,0,23,7],[136,16,38,9,"result"],[136,22,23,7],[137,0,23,7],[138,0,23,7],[139,0,23,7],[141,0,23,7],[141,46,39,15],[142,0,39,17,"isNew"],[142,14,39,17,"isNew"],[142,19,39,22],[142,21,39,24],[143,0,39,15],[143,13,23,7],[145,0,23,7],[146,0,23,7],[146,46,41,11],[147,0,42,8,"isNew"],[147,14,42,8,"isNew"],[147,19,42,13],[147,21,42,15],[147,25,41,11],[148,0,43,8,"manifest"],[148,14,43,8,"manifest"],[148,22,43,16],[148,24,43,18],[148,31,43,25,"result"],[148,37,43,18],[148,42,43,36],[148,50,43,18],[148,53,43,47,"JSON"],[148,57,43,51],[148,58,43,52,"parse"],[148,63,43,47],[148,64,43,58,"result"],[148,70,43,47],[148,71,43,18],[148,74,43,68,"result"],[149,0,41,11],[149,13,23,7],[151,0,23,7],[152,0,23,7],[153,0,23,7],[154,0,23,7],[155,0,23,7],[156,0,23,7],[157,0,23,7],[159,0,46,7],[159,11,46,22,"clearUpdateCacheExperimentalAsync"],[159,44,46,7],[159,45,46,56,"abiVersion"],[159,55,46,7],[160,0,46,7],[161,0,46,7],[162,0,46,7],[163,0,46,7],[164,0,46,7],[164,16,47,9,"ExponentUpdates"],[164,41,47,25,"clearUpdateCacheAsync"],[164,62,46,7],[165,0,46,7],[166,0,46,7],[167,0,46,7],[169,0,46,7],[169,18,48,14],[169,22,48,18,"UnavailabilityError"],[169,47,48,14],[169,48,48,38],[169,57,48,14],[169,59,48,49],[169,82,48,14],[169,83,46,7],[171,0,46,7],[172,0,46,7],[172,46,50,11,"ExponentUpdates"],[172,71,50,27,"clearUpdateCacheAsync"],[172,92,50,11],[172,93,50,49,"abiVersion"],[172,103,50,11],[172,104,46,7],[174,0,46,7],[175,0,46,7],[176,0,46,7],[177,0,46,7],[178,0,46,7],[179,0,46,7],[180,0,46,7],[182,0,52,0],[182,6,52,4,"_emitter"],[182,14,52,0],[184,0,53,0],[184,11,53,9,"_getEmitter"],[184,22,53,0],[184,25,53,23],[185,0,54,4],[185,8,54,8],[185,9,54,9,"_emitter"],[185,17,54,4],[185,19,54,19],[186,0,55,8,"_emitter"],[186,6,55,8,"_emitter"],[186,14,55,16],[186,17,55,19],[186,21,55,23,"EventEmitter"],[186,44,55,19],[186,46,55,8],[188,0,56,8,"RCTDeviceEventEmitter"],[188,34,56,30,"addListener"],[188,45,56,8],[188,46,56,42],[188,75,56,8],[188,77,56,73,"_emitEvent"],[188,87,56,8],[189,0,57,5],[191,0,58,4],[191,11,58,11,"_emitter"],[191,19,58,4],[192,0,59,1],[194,0,60,0],[194,11,60,9,"_emitEvent"],[194,21,60,0],[194,22,60,20,"params"],[194,28,60,0],[194,30,60,28],[195,0,61,4],[195,8,61,8,"newParams"],[195,17,61,17],[195,20,61,20,"params"],[195,26,61,4],[197,0,62,4],[197,8,62,8],[197,15,62,15,"params"],[197,21,62,8],[197,26,62,26],[197,34,62,4],[197,36,62,36],[198,0,63,8,"newParams"],[198,6,63,8,"newParams"],[198,15,63,17],[198,18,63,20,"JSON"],[198,22,63,24],[198,23,63,25,"parse"],[198,28,63,20],[198,29,63,31,"params"],[198,35,63,20],[198,36,63,8],[199,0,64,5],[201,0,65,4],[201,8,65,8,"newParams"],[201,17,65,17],[201,18,65,18,"manifestString"],[201,32,65,4],[201,34,65,34],[202,0,66,8,"newParams"],[202,6,66,8,"newParams"],[202,15,66,17],[202,16,66,18,"manifest"],[202,24,66,8],[202,27,66,29,"JSON"],[202,31,66,33],[202,32,66,34,"parse"],[202,37,66,29],[202,38,66,40,"newParams"],[202,47,66,49],[202,48,66,50,"manifestString"],[202,62,66,29],[202,63,66,8],[203,0,67,8],[203,13,67,15,"newParams"],[203,22,67,24],[203,23,67,25,"manifestString"],[203,37,67,8],[204,0,68,5],[206,0,69,4],[206,8,69,8],[206,9,69,9,"_emitter"],[206,17,69,4],[206,19,69,19],[207,0,70,8],[207,12,70,14],[207,16,70,18,"Error"],[207,21,70,14],[207,82,70,8],[208,0,71,5],[210,0,72,4,"_emitter"],[210,4,72,4,"_emitter"],[210,12,72,12],[210,13,72,13,"emit"],[210,17,72,4],[210,18,72,18],[210,41,72,4],[210,43,72,43,"newParams"],[210,52,72,4],[211,0,73,1],[213,0,74,7],[213,11,74,16,"addListener"],[213,22,74,7],[213,23,74,28,"listener"],[213,31,74,7],[213,33,74,38],[214,0,75,4],[214,8,75,8,"emitter"],[214,15,75,15],[214,18,75,18,"_getEmitter"],[214,29,75,29],[214,31,75,4],[216,0,76,4],[216,11,76,11,"emitter"],[216,18,76,18],[216,19,76,19,"addListener"],[216,30,76,11],[216,31,76,31],[216,54,76,11],[216,56,76,56,"listener"],[216,64,76,11],[216,65,76,4],[217,0,77,1],[219,0,78,7],[219,6,78,13,"EventType"],[219,15,78,22],[219,18,78,25],[220,0,79,4,"DOWNLOAD_STARTED"],[220,4,79,4,"DOWNLOAD_STARTED"],[220,20,79,20],[220,22,79,22],[220,37,78,25],[221,0,80,4,"DOWNLOAD_PROGRESS"],[221,4,80,4,"DOWNLOAD_PROGRESS"],[221,21,80,21],[221,23,80,23],[221,41,78,25],[222,0,81,4,"DOWNLOAD_FINISHED"],[222,4,81,4,"DOWNLOAD_FINISHED"],[222,21,81,21],[222,23,81,23],[222,41,78,25],[223,0,82,4,"NO_UPDATE_AVAILABLE"],[223,4,82,4,"NO_UPDATE_AVAILABLE"],[223,23,82,23],[223,25,82,25],[223,44,78,25],[224,0,83,4,"ERROR"],[224,4,83,4,"ERROR"],[224,9,83,9],[224,11,83,11],[225,0,78,25],[225,3,78,7]]},"type":"js/module"}]}